{"ast":null,"code":"import _objectSpread from\"D:/Doc Sign/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{useAuth,api}from'../context/AuthContext';import PDFRenderer from'../components/PDFRenderer';import Header from'../components/Header';import SignatureInputModal from'../components/SignatureInputModal';import{cssToPDF}from'../utils/coordinateTransform';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DEFAULT_SIG_WIDTH=180;const DEFAULT_SIG_HEIGHT=60;// TODO: Integrate signature overlay and placement logic\nconst DocumentViewerPage=()=>{const{id}=useParams();const{token,user}=useAuth();const[pdfFile,setPdfFile]=useState(null);// Blob or URL\nconst[docInfo,setDocInfo]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[signatureFields,setSignatureFields]=useState([]);const[showSignatureModal,setShowSignatureModal]=useState(false);const[pendingSignature,setPendingSignature]=useState(null);// { dataUrl, type }\nconst[selectedFieldId,setSelectedFieldId]=useState(null);const[pageDims,setPageDims]=useState({width:900,height:1200});const[currentPage,setCurrentPage]=useState(1);const[sigActionLoading,setSigActionLoading]=useState(false);const[sigActionError,setSigActionError]=useState('');const[finalizeLoading,setFinalizeLoading]=useState(false);const[finalizeError,setFinalizeError]=useState('');const[pdfBlobUrl,setPdfBlobUrl]=useState(null);// Fetch document metadata and signature overlays only.\nuseEffect(()=>{if(!id)return;setLoading(true);setError('');setDocInfo(null);setSignatureFields([]);const fetchDoc=async()=>{try{// Fetch document metadata\nconst docRes=await api.get(\"/api/docs/\".concat(id));setDocInfo(docRes.data.document);// Map signers/signatureData to overlays\nconst signers=docRes.data.document.signers||[];const overlays=signers.filter(s=>s.signatureData&&s.signatureData.image).map((s,idx)=>({id:s._id||idx,page:s.signatureData.page||1,x:s.signatureData.x||50,y:s.signatureData.y||50,width:s.signatureData.width||DEFAULT_SIG_WIDTH,height:s.signatureData.height||DEFAULT_SIG_HEIGHT,rotation:s.signatureData.rotation||0,signature:{data:s.signatureData.image,type:s.signatureData.type},signerEmail:s.email}));setSignatureFields(overlays);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to load document.');}finally{setLoading(false);}};fetchDoc();},[id,token]);useEffect(()=>{const fetchPdfBlob=async()=>{if(!docInfo)return;try{setLoading(true);setError('');// Always get the latest JWT from localStorage\nconst latestToken=localStorage.getItem('token');const res=await api.get(\"/api/docs/\".concat(docInfo._id,\"/download\"),{responseType:'blob',headers:{Authorization:\"Bearer \".concat(latestToken)}});const blobUrl=window.URL.createObjectURL(res.data);setPdfBlobUrl(blobUrl);}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to load PDF.');}finally{setLoading(false);}};fetchPdfBlob();// Clean up blob URL on unmount\nreturn()=>{if(pdfBlobUrl)window.URL.revokeObjectURL(pdfBlobUrl);};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[docInfo]);// Handle click-to-place signature field (only if a signature is pending)\nconst handlePageClick=async(page,x,y,dims)=>{if(!pendingSignature||!docInfo)return;setSigActionLoading(true);setSigActionError('');try{// Convert to PDF coordinates\nconst pdfCoords=cssToPDF(x,y,dims.height,1);// scale=1 for now\n// Save to backend (self-sign)\nawait api.post('/api/signatures/self-sign',{documentId:docInfo._id,signerEmail:user.email,signerName:user.firstName+' '+user.lastName,signatureData:pendingSignature.data,signatureType:pendingSignature.type,position:{page,x:pdfCoords.x,y:pdfCoords.y,width:DEFAULT_SIG_WIDTH,height:DEFAULT_SIG_HEIGHT,rotation:0,image:pendingSignature.data,type:pendingSignature.type}});// Reload document and overlays\nconst docRes=await api.get(\"/api/docs/\".concat(id));setDocInfo(docRes.data.document);const signers=docRes.data.document.signers||[];const overlays=signers.filter(s=>s.signatureData&&s.signatureData.image).map((s,idx)=>({id:s._id||idx,page:s.signatureData.page||1,x:s.signatureData.x||50,y:s.signatureData.y||50,width:s.signatureData.width||DEFAULT_SIG_WIDTH,height:s.signatureData.height||DEFAULT_SIG_HEIGHT,rotation:s.signatureData.rotation||0,signature:{data:s.signatureData.image,type:s.signatureData.type},signerEmail:s.email}));setSignatureFields(overlays);setPendingSignature(null);setShowSignatureModal(false);}catch(err){var _err$response3,_err$response3$data;setSigActionError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Failed to save signature.');}finally{setSigActionLoading(false);}};// Update a signature field's position/size/rotation (optional: sync with backend)\nconst handleUpdateField=(id,updates)=>{setSignatureFields(fields=>fields.map(f=>f.id===id?_objectSpread(_objectSpread({},f),updates):f));// Optionally, sync with backend here\n};// Remove a signature field (optional: sync with backend)\nconst handleRemoveField=id=>{setSignatureFields(fields=>fields.filter(f=>f.id!==id));setSelectedFieldId(null);// Optionally, sync with backend here\n};// Save signature modal result\nconst handleSignatureSave=(dataUrl,type)=>{setPendingSignature({data:dataUrl,type});setShowSignatureModal(false);// Close the modal after saving\n// Modal closes, user will click to place on PDF\n};// Track selected field for coordinate display\nconst handleFieldSelect=id=>{setSelectedFieldId(id);};// Get selected field's coordinates (PDF system)\nconst selectedField=signatureFields.find(f=>f.id===selectedFieldId);// Finalize and download signed PDF\nconst handleFinalizeDownload=async()=>{if(!docInfo)return;setFinalizeLoading(true);setFinalizeError('');try{const res=await api.post(\"/api/signatures/finalize/\".concat(docInfo._id),{},{responseType:'blob'});// Download the PDF\nconst url=window.URL.createObjectURL(new Blob([res.data],{type:'application/pdf'}));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"\".concat(docInfo.originalName||'signed-document',\".pdf\"));document.body.appendChild(link);link.click();link.parentNode.removeChild(link);window.URL.revokeObjectURL(url);}catch(err){var _err$response4,_err$response4$data;setFinalizeError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||'Failed to finalize and download PDF.');}finally{setFinalizeLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen min-h-0 w-full\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-gray-50 border-b border-gray-200 z-10\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-2 bg-gray-200 rounded disabled:opacity-50 font-semibold min-w-[44px] min-h-[36px] focus:outline-none focus:ring-2 focus:ring-indigo-400 mx-1\",onClick:()=>setCurrentPage(p=>Math.max(1,p-1)),disabled:currentPage<=1,\"aria-label\":\"Previous page\",title:\"Previous page\",tabIndex:0,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700 font-medium mx-2\",\"aria-live\":\"polite\",children:[\"Page \",currentPage]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-2 bg-gray-200 rounded disabled:opacity-50 font-semibold min-w-[44px] min-h-[36px] focus:outline-none focus:ring-2 focus:ring-indigo-400 mx-1\",onClick:()=>setCurrentPage(p=>p+1),disabled:false// We'll disable if we know numPages\n,\"aria-label\":\"Next page\",title:\"Next page\",tabIndex:0,children:\"Next\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-h-0 overflow-auto flex justify-center items-start bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-5xl flex flex-col items-center relative m-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Document Viewer\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Loading document...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:error}),sigActionError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:sigActionError}),finalizeError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:finalizeError}),pdfBlobUrl&&!loading&&!error&&/*#__PURE__*/_jsx(PDFRenderer,{file:pdfBlobUrl,pageNumber:currentPage,signatureFields:signatureFields,onPageClick:pendingSignature?handlePageClick:undefined,onUpdateField:handleUpdateField,onRemoveField:handleRemoveField,onFieldSelect:handleFieldSelect,selectedFieldId:selectedFieldId,onPageChange:setCurrentPage,initialPage:currentPage,pageDims:pageDims}),!pdfBlobUrl&&!loading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"No PDF loaded\"}),docInfo&&docInfo.status!=='completed'&&/*#__PURE__*/_jsx(\"button\",{className:\"mt-6 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 disabled:opacity-50\",onClick:handleFinalizeDownload,disabled:finalizeLoading,\"aria-label\":\"Finalize and download signed PDF\",children:finalizeLoading?'Finalizing...':'Finalize & Download Signed PDF'}),/*#__PURE__*/_jsx(\"button\",{className:\"fixed bottom-8 right-8 z-40 bg-indigo-600 text-white rounded-full shadow-lg p-4 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400\",onClick:()=>setShowSignatureModal(true),\"aria-label\":\"Add Signature\",disabled:sigActionLoading,children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold\",children:\"+\"})}),/*#__PURE__*/_jsx(SignatureInputModal,{open:showSignatureModal,onClose:()=>{setShowSignatureModal(false);setPendingSignature(null);},onSave:handleSignatureSave}),selectedField&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-8 left-8 bg-white rounded shadow-lg px-4 py-2 text-gray-700 z-40\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:\"Signature Coordinates\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Page: \",selectedField.page]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"X: \",Math.round(selectedField.x)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Y: \",Math.round(selectedField.y)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Width: \",Math.round(selectedField.width)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Height: \",Math.round(selectedField.height)]})]})]})})]});};export default DocumentViewerPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useAuth","api","PDFRenderer","Header","SignatureInputModal","cssToPDF","jsx","_jsx","jsxs","_jsxs","DEFAULT_SIG_WIDTH","DEFAULT_SIG_HEIGHT","DocumentViewerPage","id","token","user","pdfFile","setPdfFile","docInfo","setDocInfo","loading","setLoading","error","setError","signatureFields","setSignatureFields","showSignatureModal","setShowSignatureModal","pendingSignature","setPendingSignature","selectedFieldId","setSelectedFieldId","pageDims","setPageDims","width","height","currentPage","setCurrentPage","sigActionLoading","setSigActionLoading","sigActionError","setSigActionError","finalizeLoading","setFinalizeLoading","finalizeError","setFinalizeError","pdfBlobUrl","setPdfBlobUrl","fetchDoc","docRes","get","concat","data","document","signers","overlays","filter","s","signatureData","image","map","idx","_id","page","x","y","rotation","signature","type","signerEmail","email","err","_err$response","_err$response$data","response","message","fetchPdfBlob","latestToken","localStorage","getItem","res","responseType","headers","Authorization","blobUrl","window","URL","createObjectURL","_err$response2","_err$response2$data","revokeObjectURL","handlePageClick","dims","pdfCoords","post","documentId","signerName","firstName","lastName","signatureType","position","_err$response3","_err$response3$data","handleUpdateField","updates","fields","f","_objectSpread","handleRemoveField","handleSignatureSave","dataUrl","handleFieldSelect","selectedField","find","handleFinalizeDownload","url","Blob","link","createElement","href","setAttribute","originalName","body","appendChild","click","parentNode","removeChild","_err$response4","_err$response4$data","className","children","onClick","p","Math","max","disabled","title","tabIndex","file","pageNumber","onPageClick","undefined","onUpdateField","onRemoveField","onFieldSelect","onPageChange","initialPage","status","open","onClose","onSave","round"],"sources":["D:/Doc Sign/client/src/pages/DocumentViewerPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useAuth, api } from '../context/AuthContext';\r\nimport PDFRenderer from '../components/PDFRenderer';\r\nimport Header from '../components/Header';\r\nimport SignatureInputModal from '../components/SignatureInputModal';\r\nimport { cssToPDF } from '../utils/coordinateTransform';\r\n\r\nconst DEFAULT_SIG_WIDTH = 180;\r\nconst DEFAULT_SIG_HEIGHT = 60;\r\n\r\n// TODO: Integrate signature overlay and placement logic\r\n\r\nconst DocumentViewerPage = () => {\r\n  const { id } = useParams();\r\n  const { token, user } = useAuth();\r\n  const [pdfFile, setPdfFile] = useState(null); // Blob or URL\r\n  const [docInfo, setDocInfo] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [signatureFields, setSignatureFields] = useState([]);\r\n  const [showSignatureModal, setShowSignatureModal] = useState(false);\r\n  const [pendingSignature, setPendingSignature] = useState(null); // { dataUrl, type }\r\n  const [selectedFieldId, setSelectedFieldId] = useState(null);\r\n  const [pageDims, setPageDims] = useState({ width: 900, height: 1200 });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [sigActionLoading, setSigActionLoading] = useState(false);\r\n  const [sigActionError, setSigActionError] = useState('');\r\n  const [finalizeLoading, setFinalizeLoading] = useState(false);\r\n  const [finalizeError, setFinalizeError] = useState('');\r\n  const [pdfBlobUrl, setPdfBlobUrl] = useState(null);\r\n\r\n  // Fetch document metadata and signature overlays only.\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    setLoading(true);\r\n    setError('');\r\n    setDocInfo(null);\r\n    setSignatureFields([]);\r\n    const fetchDoc = async () => {\r\n      try {\r\n        // Fetch document metadata\r\n        const docRes = await api.get(`/api/docs/${id}`);\r\n        setDocInfo(docRes.data.document);\r\n        // Map signers/signatureData to overlays\r\n        const signers = docRes.data.document.signers || [];\r\n        const overlays = signers\r\n          .filter(s => s.signatureData && s.signatureData.image)\r\n          .map((s, idx) => ({\r\n            id: s._id || idx,\r\n            page: s.signatureData.page || 1,\r\n            x: s.signatureData.x || 50,\r\n            y: s.signatureData.y || 50,\r\n            width: s.signatureData.width || DEFAULT_SIG_WIDTH,\r\n            height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\r\n            rotation: s.signatureData.rotation || 0,\r\n            signature: { data: s.signatureData.image, type: s.signatureData.type },\r\n            signerEmail: s.email,\r\n          }));\r\n        setSignatureFields(overlays);\r\n      } catch (err) {\r\n        setError(err.response?.data?.message || 'Failed to load document.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchDoc();\r\n  }, [id, token]);\r\n\r\n  useEffect(() => {\r\n    const fetchPdfBlob = async () => {\r\n      if (!docInfo) return;\r\n      try {\r\n        setLoading(true);\r\n        setError('');\r\n        // Always get the latest JWT from localStorage\r\n        const latestToken = localStorage.getItem('token');\r\n        const res = await api.get(`/api/docs/${docInfo._id}/download`, {\r\n          responseType: 'blob',\r\n          headers: { Authorization: `Bearer ${latestToken}` },\r\n        });\r\n        const blobUrl = window.URL.createObjectURL(res.data);\r\n        setPdfBlobUrl(blobUrl);\r\n      } catch (err) {\r\n        setError(err.response?.data?.message || 'Failed to load PDF.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchPdfBlob();\r\n    // Clean up blob URL on unmount\r\n    return () => {\r\n      if (pdfBlobUrl) window.URL.revokeObjectURL(pdfBlobUrl);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [docInfo]);\r\n\r\n  // Handle click-to-place signature field (only if a signature is pending)\r\n  const handlePageClick = async (page, x, y, dims) => {\r\n    if (!pendingSignature || !docInfo) return;\r\n    setSigActionLoading(true);\r\n    setSigActionError('');\r\n    try {\r\n      // Convert to PDF coordinates\r\n      const pdfCoords = cssToPDF(x, y, dims.height, 1); // scale=1 for now\r\n      // Save to backend (self-sign)\r\n      await api.post('/api/signatures/self-sign', {\r\n        documentId: docInfo._id,\r\n        signerEmail: user.email,\r\n        signerName: user.firstName + ' ' + user.lastName,\r\n        signatureData: pendingSignature.data,\r\n        signatureType: pendingSignature.type,\r\n        position: {\r\n          page,\r\n          x: pdfCoords.x,\r\n          y: pdfCoords.y,\r\n          width: DEFAULT_SIG_WIDTH,\r\n          height: DEFAULT_SIG_HEIGHT,\r\n          rotation: 0,\r\n          image: pendingSignature.data,\r\n          type: pendingSignature.type,\r\n        },\r\n      });\r\n      // Reload document and overlays\r\n      const docRes = await api.get(`/api/docs/${id}`);\r\n      setDocInfo(docRes.data.document);\r\n      const signers = docRes.data.document.signers || [];\r\n      const overlays = signers\r\n        .filter(s => s.signatureData && s.signatureData.image)\r\n        .map((s, idx) => ({\r\n          id: s._id || idx,\r\n          page: s.signatureData.page || 1,\r\n          x: s.signatureData.x || 50,\r\n          y: s.signatureData.y || 50,\r\n          width: s.signatureData.width || DEFAULT_SIG_WIDTH,\r\n          height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\r\n          rotation: s.signatureData.rotation || 0,\r\n          signature: { data: s.signatureData.image, type: s.signatureData.type },\r\n          signerEmail: s.email,\r\n        }));\r\n      setSignatureFields(overlays);\r\n      setPendingSignature(null);\r\n      setShowSignatureModal(false);\r\n    } catch (err) {\r\n      setSigActionError(err.response?.data?.message || 'Failed to save signature.');\r\n    } finally {\r\n      setSigActionLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update a signature field's position/size/rotation (optional: sync with backend)\r\n  const handleUpdateField = (id, updates) => {\r\n    setSignatureFields(fields => fields.map(f => f.id === id ? { ...f, ...updates } : f));\r\n    // Optionally, sync with backend here\r\n  };\r\n\r\n  // Remove a signature field (optional: sync with backend)\r\n  const handleRemoveField = (id) => {\r\n    setSignatureFields(fields => fields.filter(f => f.id !== id));\r\n    setSelectedFieldId(null);\r\n    // Optionally, sync with backend here\r\n  };\r\n\r\n  // Save signature modal result\r\n  const handleSignatureSave = (dataUrl, type) => {\r\n    setPendingSignature({ data: dataUrl, type });\r\n    setShowSignatureModal(false); // Close the modal after saving\r\n    // Modal closes, user will click to place on PDF\r\n  };\r\n\r\n  // Track selected field for coordinate display\r\n  const handleFieldSelect = (id) => {\r\n    setSelectedFieldId(id);\r\n  };\r\n\r\n  // Get selected field's coordinates (PDF system)\r\n  const selectedField = signatureFields.find(f => f.id === selectedFieldId);\r\n\r\n  // Finalize and download signed PDF\r\n  const handleFinalizeDownload = async () => {\r\n    if (!docInfo) return;\r\n    setFinalizeLoading(true);\r\n    setFinalizeError('');\r\n    try {\r\n      const res = await api.post(`/api/signatures/finalize/${docInfo._id}`, {}, {\r\n        responseType: 'blob',\r\n      });\r\n      // Download the PDF\r\n      const url = window.URL.createObjectURL(new Blob([res.data], { type: 'application/pdf' }));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `${docInfo.originalName || 'signed-document'}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.parentNode.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (err) {\r\n      setFinalizeError(err.response?.data?.message || 'Failed to finalize and download PDF.');\r\n    } finally {\r\n      setFinalizeLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen min-h-0 w-full\">\r\n      <Header />\r\n      {/* Navigation Toolbar restored */}\r\n      <div className=\"h-12 flex items-center justify-center bg-gray-50 border-b border-gray-200 z-10\">\r\n        <button\r\n          className=\"px-3 py-2 bg-gray-200 rounded disabled:opacity-50 font-semibold min-w-[44px] min-h-[36px] focus:outline-none focus:ring-2 focus:ring-indigo-400 mx-1\"\r\n          onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\r\n          disabled={currentPage <= 1}\r\n          aria-label=\"Previous page\"\r\n          title=\"Previous page\"\r\n          tabIndex={0}\r\n        >\r\n          Previous\r\n        </button>\r\n        <span className=\"text-gray-700 font-medium mx-2\" aria-live=\"polite\">\r\n          Page {currentPage}\r\n        </span>\r\n        <button\r\n          className=\"px-3 py-2 bg-gray-200 rounded disabled:opacity-50 font-semibold min-w-[44px] min-h-[36px] focus:outline-none focus:ring-2 focus:ring-indigo-400 mx-1\"\r\n          onClick={() => setCurrentPage((p) => p + 1)}\r\n          disabled={false} // We'll disable if we know numPages\r\n          aria-label=\"Next page\"\r\n          title=\"Next page\"\r\n          tabIndex={0}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n      {/* PDF Viewer Container - bulletproof flex layout */}\r\n      <div className=\"flex-1 min-h-0 overflow-auto flex justify-center items-start bg-gray-50\">\r\n        <div className=\"w-full max-w-5xl flex flex-col items-center relative m-auto\">\r\n          <h1 className=\"text-2xl font-bold mb-4\">Document Viewer</h1>\r\n          {loading && <div className=\"text-gray-500\">Loading document...</div>}\r\n          {error && <div className=\"text-red-500\">{error}</div>}\r\n          {sigActionError && <div className=\"text-red-500\">{sigActionError}</div>}\r\n          {finalizeError && <div className=\"text-red-500\">{finalizeError}</div>}\r\n          {pdfBlobUrl && !loading && !error && (\r\n            <PDFRenderer\r\n              file={pdfBlobUrl}\r\n              pageNumber={currentPage}\r\n              signatureFields={signatureFields}\r\n              onPageClick={pendingSignature ? handlePageClick : undefined}\r\n              onUpdateField={handleUpdateField}\r\n              onRemoveField={handleRemoveField}\r\n              onFieldSelect={handleFieldSelect}\r\n              selectedFieldId={selectedFieldId}\r\n              onPageChange={setCurrentPage}\r\n              initialPage={currentPage}\r\n              pageDims={pageDims}\r\n            />\r\n          )}\r\n          {!pdfBlobUrl && !loading && !error && (\r\n            <div className=\"text-gray-500\">No PDF loaded</div>\r\n          )}\r\n          {/* Finalize & Download Button */}\r\n          {docInfo && docInfo.status !== 'completed' && (\r\n            <button\r\n              className=\"mt-6 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 disabled:opacity-50\"\r\n              onClick={handleFinalizeDownload}\r\n              disabled={finalizeLoading}\r\n              aria-label=\"Finalize and download signed PDF\"\r\n            >\r\n              {finalizeLoading ? 'Finalizing...' : 'Finalize & Download Signed PDF'}\r\n            </button>\r\n          )}\r\n          {/* Floating Add Signature Button */}\r\n          <button\r\n            className=\"fixed bottom-8 right-8 z-40 bg-indigo-600 text-white rounded-full shadow-lg p-4 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400\"\r\n            onClick={() => setShowSignatureModal(true)}\r\n            aria-label=\"Add Signature\"\r\n            disabled={sigActionLoading}\r\n          >\r\n            <span className=\"text-2xl font-bold\">+</span>\r\n          </button>\r\n          {/* Signature Creation Modal */}\r\n          <SignatureInputModal\r\n            open={showSignatureModal}\r\n            onClose={() => { setShowSignatureModal(false); setPendingSignature(null); }}\r\n            onSave={handleSignatureSave}\r\n          />\r\n          {/* Real-time coordinate display for selected field */}\r\n          {selectedField && (\r\n            <div className=\"fixed bottom-8 left-8 bg-white rounded shadow-lg px-4 py-2 text-gray-700 z-40\">\r\n              <div className=\"font-semibold\">Signature Coordinates</div>\r\n              <div>Page: {selectedField.page}</div>\r\n              <div>X: {Math.round(selectedField.x)}</div>\r\n              <div>Y: {Math.round(selectedField.y)}</div>\r\n              <div>Width: {Math.round(selectedField.width)}</div>\r\n              <div>Height: {Math.round(selectedField.height)}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentViewerPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}