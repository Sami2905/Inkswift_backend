{"ast":null,"code":"var _jsxFileName = \"D:\\\\Doc Sign\\\\client\\\\src\\\\pages\\\\DocumentViewerPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useAuth, api } from '../context/AuthContext';\nimport PDFRenderer from '../components/PDFRenderer';\nimport Header from '../components/Header';\nimport SignatureInputModal from '../components/SignatureInputModal';\nimport { cssToPDF } from '../utils/coordinateTransform';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_SIG_WIDTH = 180;\nconst DEFAULT_SIG_HEIGHT = 60;\n\n// TODO: Integrate signature overlay and placement logic\n\nconst DocumentViewerPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    token,\n    user\n  } = useAuth();\n  const [pdfFile, setPdfFile] = useState(null); // Blob or URL\n  const [docInfo, setDocInfo] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [signatureFields, setSignatureFields] = useState([]);\n  const [showSignatureModal, setShowSignatureModal] = useState(false);\n  const [pendingSignature, setPendingSignature] = useState(null); // { dataUrl, type }\n  const [selectedFieldId, setSelectedFieldId] = useState(null);\n  const [pageDims, setPageDims] = useState({\n    width: 900,\n    height: 1200\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [sigActionLoading, setSigActionLoading] = useState(false);\n  const [sigActionError, setSigActionError] = useState('');\n  const [finalizeLoading, setFinalizeLoading] = useState(false);\n  const [finalizeError, setFinalizeError] = useState('');\n\n  // Fetch document metadata, PDF, and signatures from backend\n  useEffect(() => {\n    if (!id) return;\n    setLoading(true);\n    setError('');\n    setPdfFile(null);\n    setDocInfo(null);\n    setSignatureFields([]);\n    const fetchDoc = async () => {\n      try {\n        // Fetch document metadata\n        const docRes = await api.get(`/api/docs/${id}`);\n        setDocInfo(docRes.data.document);\n        // Fetch PDF blob\n        const pdfRes = await api.get(`/api/docs/${id}/download`, {\n          responseType: 'blob'\n        });\n        setPdfFile(new Blob([pdfRes.data], {\n          type: 'application/pdf'\n        }));\n        // Map signers/signatureData to overlays\n        const signers = docRes.data.document.signers || [];\n        const overlays = signers.filter(s => s.signatureData && s.signatureData.image).map((s, idx) => ({\n          id: s._id || idx,\n          page: s.signatureData.page || 1,\n          x: s.signatureData.x || 50,\n          y: s.signatureData.y || 50,\n          width: s.signatureData.width || DEFAULT_SIG_WIDTH,\n          height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\n          rotation: s.signatureData.rotation || 0,\n          signature: {\n            data: s.signatureData.image,\n            type: s.signatureData.type\n          },\n          signerEmail: s.email\n        }));\n        setSignatureFields(overlays);\n      } catch (err) {\n        var _err$response, _err$response$data;\n        setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load document.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchDoc();\n  }, [id, token]);\n\n  // Handle click-to-place signature field (only if a signature is pending)\n  const handlePageClick = async (page, x, y, dims) => {\n    if (!pendingSignature || !docInfo) return;\n    setSigActionLoading(true);\n    setSigActionError('');\n    try {\n      // Convert to PDF coordinates\n      const pdfCoords = cssToPDF(x, y, dims.height, 1); // scale=1 for now\n      // Save to backend (self-sign)\n      await api.post('/api/signatures/self-sign', {\n        documentId: docInfo._id,\n        signerEmail: user.email,\n        signerName: user.firstName + ' ' + user.lastName,\n        signatureData: pendingSignature.data,\n        signatureType: pendingSignature.type,\n        position: {\n          page,\n          x: pdfCoords.x,\n          y: pdfCoords.y,\n          width: DEFAULT_SIG_WIDTH,\n          height: DEFAULT_SIG_HEIGHT,\n          rotation: 0,\n          image: pendingSignature.data,\n          type: pendingSignature.type\n        }\n      });\n      // Reload document and overlays\n      const docRes = await api.get(`/api/docs/${id}`);\n      setDocInfo(docRes.data.document);\n      const signers = docRes.data.document.signers || [];\n      const overlays = signers.filter(s => s.signatureData && s.signatureData.image).map((s, idx) => ({\n        id: s._id || idx,\n        page: s.signatureData.page || 1,\n        x: s.signatureData.x || 50,\n        y: s.signatureData.y || 50,\n        width: s.signatureData.width || DEFAULT_SIG_WIDTH,\n        height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\n        rotation: s.signatureData.rotation || 0,\n        signature: {\n          data: s.signatureData.image,\n          type: s.signatureData.type\n        },\n        signerEmail: s.email\n      }));\n      setSignatureFields(overlays);\n      setPendingSignature(null);\n      setShowSignatureModal(false);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setSigActionError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to save signature.');\n    } finally {\n      setSigActionLoading(false);\n    }\n  };\n\n  // Update a signature field's position/size/rotation (optional: sync with backend)\n  const handleUpdateField = (id, updates) => {\n    setSignatureFields(fields => fields.map(f => f.id === id ? {\n      ...f,\n      ...updates\n    } : f));\n    // Optionally, sync with backend here\n  };\n\n  // Remove a signature field (optional: sync with backend)\n  const handleRemoveField = id => {\n    setSignatureFields(fields => fields.filter(f => f.id !== id));\n    setSelectedFieldId(null);\n    // Optionally, sync with backend here\n  };\n\n  // Save signature modal result\n  const handleSignatureSave = (dataUrl, type) => {\n    setPendingSignature({\n      data: dataUrl,\n      type\n    });\n    // Modal closes, user will click to place on PDF\n  };\n\n  // Track selected field for coordinate display\n  const handleFieldSelect = id => {\n    setSelectedFieldId(id);\n  };\n\n  // Get selected field's coordinates (PDF system)\n  const selectedField = signatureFields.find(f => f.id === selectedFieldId);\n\n  // Finalize and download signed PDF\n  const handleFinalizeDownload = async () => {\n    if (!docInfo) return;\n    setFinalizeLoading(true);\n    setFinalizeError('');\n    try {\n      const res = await api.post(`/api/signatures/finalize/${docInfo._id}`, {}, {\n        responseType: 'blob'\n      });\n      // Download the PDF\n      const url = window.URL.createObjectURL(new Blob([res.data], {\n        type: 'application/pdf'\n      }));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `${docInfo.originalName || 'signed-document'}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      setFinalizeError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Failed to finalize and download PDF.');\n    } finally {\n      setFinalizeLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 flex flex-col\",\n    style: {\n      height: '100vh',\n      minHeight: 0\n    },\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 flex flex-col items-center justify-center p-4\",\n      style: {\n        flex: 1,\n        minHeight: 0,\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-5xl mx-auto flex flex-col items-center relative\",\n        style: {\n          flex: 1,\n          minHeight: 0,\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold mb-4\",\n          children: \"Document Viewer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500\",\n          children: \"Loading document...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 23\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }, this), sigActionError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: sigActionError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 30\n        }, this), finalizeError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: finalizeError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }, this), pdfFile && !loading && !error && /*#__PURE__*/_jsxDEV(PDFRenderer, {\n          file: pdfFile,\n          signatureFields: signatureFields,\n          onPageClick: handlePageClick,\n          onUpdateField: (id, updates) => handleUpdateField(id, updates),\n          onRemoveField: handleRemoveField,\n          onPageChange: setCurrentPage,\n          initialPage: currentPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), !pdfFile && !loading && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500\",\n          children: \"No PDF loaded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this), docInfo && docInfo.status !== 'completed' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-6 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 disabled:opacity-50\",\n          onClick: handleFinalizeDownload,\n          disabled: finalizeLoading,\n          \"aria-label\": \"Finalize and download signed PDF\",\n          children: finalizeLoading ? 'Finalizing...' : 'Finalize & Download Signed PDF'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"fixed bottom-8 right-8 z-40 bg-indigo-600 text-white rounded-full shadow-lg p-4 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400\",\n          onClick: () => setShowSignatureModal(true),\n          \"aria-label\": \"Add Signature\",\n          disabled: sigActionLoading,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-2xl font-bold\",\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SignatureInputModal, {\n          open: showSignatureModal,\n          onClose: () => {\n            setShowSignatureModal(false);\n            setPendingSignature(null);\n          },\n          onSave: handleSignatureSave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), selectedField && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fixed bottom-8 left-8 bg-white rounded shadow-lg px-4 py-2 text-gray-700 z-40\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold\",\n            children: \"Signature Coordinates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Page: \", selectedField.page]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"X: \", Math.round(selectedField.x)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Y: \", Math.round(selectedField.y)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Width: \", Math.round(selectedField.width)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Height: \", Math.round(selectedField.height)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n_s(DocumentViewerPage, \"omhip95VCUTEEI1jWNKaILEpF2I=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = DocumentViewerPage;\nexport default DocumentViewerPage;\nvar _c;\n$RefreshReg$(_c, \"DocumentViewerPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useAuth","api","PDFRenderer","Header","SignatureInputModal","cssToPDF","jsxDEV","_jsxDEV","DEFAULT_SIG_WIDTH","DEFAULT_SIG_HEIGHT","DocumentViewerPage","_s","id","token","user","pdfFile","setPdfFile","docInfo","setDocInfo","loading","setLoading","error","setError","signatureFields","setSignatureFields","showSignatureModal","setShowSignatureModal","pendingSignature","setPendingSignature","selectedFieldId","setSelectedFieldId","pageDims","setPageDims","width","height","currentPage","setCurrentPage","sigActionLoading","setSigActionLoading","sigActionError","setSigActionError","finalizeLoading","setFinalizeLoading","finalizeError","setFinalizeError","fetchDoc","docRes","get","data","document","pdfRes","responseType","Blob","type","signers","overlays","filter","s","signatureData","image","map","idx","_id","page","x","y","rotation","signature","signerEmail","email","err","_err$response","_err$response$data","response","message","handlePageClick","dims","pdfCoords","post","documentId","signerName","firstName","lastName","signatureType","position","_err$response2","_err$response2$data","handleUpdateField","updates","fields","f","handleRemoveField","handleSignatureSave","dataUrl","handleFieldSelect","selectedField","find","handleFinalizeDownload","res","url","window","URL","createObjectURL","link","createElement","href","setAttribute","originalName","body","appendChild","click","parentNode","removeChild","revokeObjectURL","_err$response3","_err$response3$data","className","style","minHeight","children","fileName","_jsxFileName","lineNumber","columnNumber","flex","file","onPageClick","onUpdateField","onRemoveField","onPageChange","initialPage","status","onClick","disabled","open","onClose","onSave","Math","round","_c","$RefreshReg$"],"sources":["D:/Doc Sign/client/src/pages/DocumentViewerPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useAuth, api } from '../context/AuthContext';\r\nimport PDFRenderer from '../components/PDFRenderer';\r\nimport Header from '../components/Header';\r\nimport SignatureInputModal from '../components/SignatureInputModal';\r\nimport { cssToPDF } from '../utils/coordinateTransform';\r\n\r\nconst DEFAULT_SIG_WIDTH = 180;\r\nconst DEFAULT_SIG_HEIGHT = 60;\r\n\r\n// TODO: Integrate signature overlay and placement logic\r\n\r\nconst DocumentViewerPage = () => {\r\n  const { id } = useParams();\r\n  const { token, user } = useAuth();\r\n  const [pdfFile, setPdfFile] = useState(null); // Blob or URL\r\n  const [docInfo, setDocInfo] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [signatureFields, setSignatureFields] = useState([]);\r\n  const [showSignatureModal, setShowSignatureModal] = useState(false);\r\n  const [pendingSignature, setPendingSignature] = useState(null); // { dataUrl, type }\r\n  const [selectedFieldId, setSelectedFieldId] = useState(null);\r\n  const [pageDims, setPageDims] = useState({ width: 900, height: 1200 });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [sigActionLoading, setSigActionLoading] = useState(false);\r\n  const [sigActionError, setSigActionError] = useState('');\r\n  const [finalizeLoading, setFinalizeLoading] = useState(false);\r\n  const [finalizeError, setFinalizeError] = useState('');\r\n\r\n  // Fetch document metadata, PDF, and signatures from backend\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    setLoading(true);\r\n    setError('');\r\n    setPdfFile(null);\r\n    setDocInfo(null);\r\n    setSignatureFields([]);\r\n    const fetchDoc = async () => {\r\n      try {\r\n        // Fetch document metadata\r\n        const docRes = await api.get(`/api/docs/${id}`);\r\n        setDocInfo(docRes.data.document);\r\n        // Fetch PDF blob\r\n        const pdfRes = await api.get(`/api/docs/${id}/download`, {\r\n          responseType: 'blob',\r\n        });\r\n        setPdfFile(new Blob([pdfRes.data], { type: 'application/pdf' }));\r\n        // Map signers/signatureData to overlays\r\n        const signers = docRes.data.document.signers || [];\r\n        const overlays = signers\r\n          .filter(s => s.signatureData && s.signatureData.image)\r\n          .map((s, idx) => ({\r\n            id: s._id || idx,\r\n            page: s.signatureData.page || 1,\r\n            x: s.signatureData.x || 50,\r\n            y: s.signatureData.y || 50,\r\n            width: s.signatureData.width || DEFAULT_SIG_WIDTH,\r\n            height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\r\n            rotation: s.signatureData.rotation || 0,\r\n            signature: { data: s.signatureData.image, type: s.signatureData.type },\r\n            signerEmail: s.email,\r\n          }));\r\n        setSignatureFields(overlays);\r\n      } catch (err) {\r\n        setError(err.response?.data?.message || 'Failed to load document.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchDoc();\r\n  }, [id, token]);\r\n\r\n  // Handle click-to-place signature field (only if a signature is pending)\r\n  const handlePageClick = async (page, x, y, dims) => {\r\n    if (!pendingSignature || !docInfo) return;\r\n    setSigActionLoading(true);\r\n    setSigActionError('');\r\n    try {\r\n      // Convert to PDF coordinates\r\n      const pdfCoords = cssToPDF(x, y, dims.height, 1); // scale=1 for now\r\n      // Save to backend (self-sign)\r\n      await api.post('/api/signatures/self-sign', {\r\n        documentId: docInfo._id,\r\n        signerEmail: user.email,\r\n        signerName: user.firstName + ' ' + user.lastName,\r\n        signatureData: pendingSignature.data,\r\n        signatureType: pendingSignature.type,\r\n        position: {\r\n          page,\r\n          x: pdfCoords.x,\r\n          y: pdfCoords.y,\r\n          width: DEFAULT_SIG_WIDTH,\r\n          height: DEFAULT_SIG_HEIGHT,\r\n          rotation: 0,\r\n          image: pendingSignature.data,\r\n          type: pendingSignature.type,\r\n        },\r\n      });\r\n      // Reload document and overlays\r\n      const docRes = await api.get(`/api/docs/${id}`);\r\n      setDocInfo(docRes.data.document);\r\n      const signers = docRes.data.document.signers || [];\r\n      const overlays = signers\r\n        .filter(s => s.signatureData && s.signatureData.image)\r\n        .map((s, idx) => ({\r\n          id: s._id || idx,\r\n          page: s.signatureData.page || 1,\r\n          x: s.signatureData.x || 50,\r\n          y: s.signatureData.y || 50,\r\n          width: s.signatureData.width || DEFAULT_SIG_WIDTH,\r\n          height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\r\n          rotation: s.signatureData.rotation || 0,\r\n          signature: { data: s.signatureData.image, type: s.signatureData.type },\r\n          signerEmail: s.email,\r\n        }));\r\n      setSignatureFields(overlays);\r\n      setPendingSignature(null);\r\n      setShowSignatureModal(false);\r\n    } catch (err) {\r\n      setSigActionError(err.response?.data?.message || 'Failed to save signature.');\r\n    } finally {\r\n      setSigActionLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update a signature field's position/size/rotation (optional: sync with backend)\r\n  const handleUpdateField = (id, updates) => {\r\n    setSignatureFields(fields => fields.map(f => f.id === id ? { ...f, ...updates } : f));\r\n    // Optionally, sync with backend here\r\n  };\r\n\r\n  // Remove a signature field (optional: sync with backend)\r\n  const handleRemoveField = (id) => {\r\n    setSignatureFields(fields => fields.filter(f => f.id !== id));\r\n    setSelectedFieldId(null);\r\n    // Optionally, sync with backend here\r\n  };\r\n\r\n  // Save signature modal result\r\n  const handleSignatureSave = (dataUrl, type) => {\r\n    setPendingSignature({ data: dataUrl, type });\r\n    // Modal closes, user will click to place on PDF\r\n  };\r\n\r\n  // Track selected field for coordinate display\r\n  const handleFieldSelect = (id) => {\r\n    setSelectedFieldId(id);\r\n  };\r\n\r\n  // Get selected field's coordinates (PDF system)\r\n  const selectedField = signatureFields.find(f => f.id === selectedFieldId);\r\n\r\n  // Finalize and download signed PDF\r\n  const handleFinalizeDownload = async () => {\r\n    if (!docInfo) return;\r\n    setFinalizeLoading(true);\r\n    setFinalizeError('');\r\n    try {\r\n      const res = await api.post(`/api/signatures/finalize/${docInfo._id}`, {}, {\r\n        responseType: 'blob',\r\n      });\r\n      // Download the PDF\r\n      const url = window.URL.createObjectURL(new Blob([res.data], { type: 'application/pdf' }));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `${docInfo.originalName || 'signed-document'}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.parentNode.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (err) {\r\n      setFinalizeError(err.response?.data?.message || 'Failed to finalize and download PDF.');\r\n    } finally {\r\n      setFinalizeLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\" style={{ height: '100vh', minHeight: 0 }}>\r\n      <Header />\r\n      <main className=\"flex-1 flex flex-col items-center justify-center p-4\" style={{ flex: 1, minHeight: 0, width: '100%' }}>\r\n        <div className=\"w-full max-w-5xl mx-auto flex flex-col items-center relative\" style={{ flex: 1, minHeight: 0, width: '100%' }}>\r\n          <h1 className=\"text-2xl font-bold mb-4\">Document Viewer</h1>\r\n          {loading && <div className=\"text-gray-500\">Loading document...</div>}\r\n          {error && <div className=\"text-red-500\">{error}</div>}\r\n          {sigActionError && <div className=\"text-red-500\">{sigActionError}</div>}\r\n          {finalizeError && <div className=\"text-red-500\">{finalizeError}</div>}\r\n          {pdfFile && !loading && !error && (\r\n            <PDFRenderer\r\n              file={pdfFile}\r\n              signatureFields={signatureFields}\r\n              onPageClick={handlePageClick}\r\n              onUpdateField={(id, updates) => handleUpdateField(id, updates)}\r\n              onRemoveField={handleRemoveField}\r\n              onPageChange={setCurrentPage}\r\n              initialPage={currentPage}\r\n            />\r\n          )}\r\n          {!pdfFile && !loading && !error && (\r\n            <div className=\"text-gray-500\">No PDF loaded</div>\r\n          )}\r\n          {/* Finalize & Download Button */}\r\n          {docInfo && docInfo.status !== 'completed' && (\r\n            <button\r\n              className=\"mt-6 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 disabled:opacity-50\"\r\n              onClick={handleFinalizeDownload}\r\n              disabled={finalizeLoading}\r\n              aria-label=\"Finalize and download signed PDF\"\r\n            >\r\n              {finalizeLoading ? 'Finalizing...' : 'Finalize & Download Signed PDF'}\r\n            </button>\r\n          )}\r\n          {/* Floating Add Signature Button */}\r\n          <button\r\n            className=\"fixed bottom-8 right-8 z-40 bg-indigo-600 text-white rounded-full shadow-lg p-4 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400\"\r\n            onClick={() => setShowSignatureModal(true)}\r\n            aria-label=\"Add Signature\"\r\n            disabled={sigActionLoading}\r\n          >\r\n            <span className=\"text-2xl font-bold\">+</span>\r\n          </button>\r\n          {/* Signature Creation Modal */}\r\n          <SignatureInputModal\r\n            open={showSignatureModal}\r\n            onClose={() => { setShowSignatureModal(false); setPendingSignature(null); }}\r\n            onSave={handleSignatureSave}\r\n          />\r\n          {/* Real-time coordinate display for selected field */}\r\n          {selectedField && (\r\n            <div className=\"fixed bottom-8 left-8 bg-white rounded shadow-lg px-4 py-2 text-gray-700 z-40\">\r\n              <div className=\"font-semibold\">Signature Coordinates</div>\r\n              <div>Page: {selectedField.page}</div>\r\n              <div>X: {Math.round(selectedField.x)}</div>\r\n              <div>Y: {Math.round(selectedField.y)}</div>\r\n              <div>Width: {Math.round(selectedField.width)}</div>\r\n              <div>Height: {Math.round(selectedField.height)}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentViewerPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}