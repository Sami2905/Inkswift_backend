{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodePDFRawStream = void 0;\nvar tslib_1 = require(\"tslib\");\nvar errors_1 = require(\"../errors\");\nvar PDFArray_1 = tslib_1.__importDefault(require(\"../objects/PDFArray\"));\nvar PDFDict_1 = tslib_1.__importDefault(require(\"../objects/PDFDict\"));\nvar PDFName_1 = tslib_1.__importDefault(require(\"../objects/PDFName\"));\nvar PDFNumber_1 = tslib_1.__importDefault(require(\"../objects/PDFNumber\"));\nvar Ascii85Stream_1 = tslib_1.__importDefault(require(\"./Ascii85Stream\"));\nvar AsciiHexStream_1 = tslib_1.__importDefault(require(\"./AsciiHexStream\"));\nvar FlateStream_1 = tslib_1.__importDefault(require(\"./FlateStream\"));\nvar LZWStream_1 = tslib_1.__importDefault(require(\"./LZWStream\"));\nvar RunLengthStream_1 = tslib_1.__importDefault(require(\"./RunLengthStream\"));\nvar Stream_1 = tslib_1.__importDefault(require(\"./Stream\"));\nvar decodeStream = function (stream, encoding, params) {\n  if (encoding === PDFName_1.default.of('FlateDecode')) {\n    return new FlateStream_1.default(stream);\n  }\n  if (encoding === PDFName_1.default.of('LZWDecode')) {\n    var earlyChange = 1;\n    if (params instanceof PDFDict_1.default) {\n      var EarlyChange = params.lookup(PDFName_1.default.of('EarlyChange'));\n      if (EarlyChange instanceof PDFNumber_1.default) {\n        earlyChange = EarlyChange.asNumber();\n      }\n    }\n    return new LZWStream_1.default(stream, undefined, earlyChange);\n  }\n  if (encoding === PDFName_1.default.of('ASCII85Decode')) {\n    return new Ascii85Stream_1.default(stream);\n  }\n  if (encoding === PDFName_1.default.of('ASCIIHexDecode')) {\n    return new AsciiHexStream_1.default(stream);\n  }\n  if (encoding === PDFName_1.default.of('RunLengthDecode')) {\n    return new RunLengthStream_1.default(stream);\n  }\n  throw new errors_1.UnsupportedEncodingError(encoding.asString());\n};\nexports.decodePDFRawStream = function (_a) {\n  var dict = _a.dict,\n    contents = _a.contents;\n  var stream = new Stream_1.default(contents);\n  var Filter = dict.lookup(PDFName_1.default.of('Filter'));\n  var DecodeParms = dict.lookup(PDFName_1.default.of('DecodeParms'));\n  if (Filter instanceof PDFName_1.default) {\n    stream = decodeStream(stream, Filter, DecodeParms);\n  } else if (Filter instanceof PDFArray_1.default) {\n    for (var idx = 0, len = Filter.size(); idx < len; idx++) {\n      stream = decodeStream(stream, Filter.lookup(idx, PDFName_1.default), DecodeParms && DecodeParms.lookupMaybe(idx, PDFDict_1.default));\n    }\n  } else if (!!Filter) {\n    throw new errors_1.UnexpectedObjectTypeError([PDFName_1.default, PDFArray_1.default], Filter);\n  }\n  return stream;\n};","map":{"version":3,"names":["errors_1","require","PDFArray_1","tslib_1","__importDefault","PDFDict_1","PDFName_1","PDFNumber_1","Ascii85Stream_1","AsciiHexStream_1","FlateStream_1","LZWStream_1","RunLengthStream_1","Stream_1","decodeStream","stream","encoding","params","default","of","earlyChange","EarlyChange","lookup","asNumber","undefined","UnsupportedEncodingError","asString","exports","decodePDFRawStream","_a","dict","contents","Filter","DecodeParms","idx","len","size","lookupMaybe","UnexpectedObjectTypeError"],"sources":["../../../src/core/streams/decode.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}