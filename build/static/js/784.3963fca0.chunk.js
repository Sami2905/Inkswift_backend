(self.webpackChunkdoc_sign_client=self.webpackChunkdoc_sign_client||[]).push([[784],{774:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5043),a=s(9798),n=s(2339),o=s(2809),c=s(6730),d=s(934),l=s(579);o.A.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@".concat(o.A.version,"/build/pdf.worker.min.js");const i=()=>{const{user:e,token:t}=(0,a.As)(),[s,o]=(0,r.useState)({}),[i,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(""),[j,f]=r.useState(null),[v,w]=r.useState(null),[y,N]=r.useState(localStorage.getItem("token")||""),[k,S]=r.useState(y),A=()=>{const[e,t]=r.useState(null);return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Test Public PDF Viewer"}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,l.jsx)(c.A,{file:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",onLoadError:e=>{t(e.message),console.error("Test PDF error:",e,e.stack,e.name,e.cause)},children:(0,l.jsx)(d.A,{pageNumber:1,width:600})}),e&&(0,l.jsxs)("div",{className:"text-red-500 mt-2",children:["Error: ",e]})]})]})},T=()=>{const[e,t]=r.useState(null),[s,n]=r.useState(null),[o,i]=r.useState(localStorage.getItem("token")||""),[u,h]=r.useState(o);return r.useEffect(()=>(o&&(async e=>{n(null),t(null);try{const s=(await a.FH.get("/api/docs/6860f7e1bdfe754adbf56eb5/download",{responseType:"blob",headers:{Authorization:"Bearer ".concat(e)}})).data;t(URL.createObjectURL(s))}catch(s){n(s.message),console.error("Backend PDF test error:",s,s.stack,s.name,s.cause)}})(o),()=>{e&&URL.revokeObjectURL(e)}),[o]),(0,l.jsxs)("div",{className:"mt-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Test Backend PDF Blob Viewer"}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{htmlFor:"jwt-input",className:"block mb-1 font-medium",children:"JWT Token"}),(0,l.jsx)("input",{id:"jwt-input",name:"jwt",type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Paste JWT token here",className:"w-full px-2 py-1 border rounded"}),(0,l.jsx)("button",{className:"mt-2 px-4 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",onClick:()=>i(u),children:"Test with this JWT"})]}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[e&&(0,l.jsx)(c.A,{file:e,onLoadError:e=>{n(e.message),console.error("Backend PDF error:",e,e.stack,e.name,e.cause)},children:(0,l.jsx)(d.A,{pageNumber:1,width:600})}),s&&(0,l.jsxs)("div",{className:"text-red-500 mt-2",children:["Error: ",s]})]})]})};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"System Test"}),(0,l.jsx)("button",{onClick:async()=>{u(!0);const s={};try{s.auth={user:!!e,token:!!t,status:"PASS"}}catch(v){s.auth={error:v.message,status:"FAIL"}}try{const e=await a.FH.get("/api/health");s.health={status:e.data.status,app:e.data.app,status:"PASS"}}catch(v){s.health={error:v.message,status:"FAIL"}}try{var r;const e=await a.FH.get("/api/docs");s.documents={count:(null===(r=e.data.documents)||void 0===r?void 0:r.length)||0,pagination:e.data.pagination,status:"PASS"}}catch(v){s.documents={error:v.message,status:"FAIL"}}try{const e=localStorage.getItem("token"),t=localStorage.getItem("user");s.storage={token:!!e,user:!!t,status:"PASS"}}catch(v){s.storage={error:v.message,status:"FAIL"}}o(s),u(!1),n.Ay.success("Tests completed!")},disabled:i,className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:i?"Running Tests...":"Run Tests"}),(0,l.jsx)("button",{className:"mb-4 ml-4 px-4 py-2 bg-sky-600 text-white rounded-xl font-semibold hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400",onClick:async()=>{g(!0),b(""),m(null);try{const e=prompt("Enter a Document ID to test PDF endpoint:","");if(!e)return b("No document ID provided."),void g(!1);const t=await fetch("/api/docs/".concat(e,"/download"),{method:"GET"}),s=t.headers.get("content-type"),r=t.headers.get("content-length");m({ok:t.ok,status:t.status,contentType:s,contentLength:r}),t.ok||b("HTTP ".concat(t.status,": ").concat(t.statusText))}catch(e){b(e.message||"PDF health check failed.")}finally{g(!1)}},disabled:x,children:x?"Checking PDF...":"PDF Health Check"}),h&&(0,l.jsxs)("div",{className:"mt-2 p-4 bg-gray-50 border rounded",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Status:"})," ",h.ok?"\u2705 OK":"\u274c Error"," (HTTP ",h.status,")"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Content-Type:"})," ",h.contentType]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Content-Length:"})," ",h.contentLength||"N/A"]})]}),p&&(0,l.jsx)("div",{className:"mt-2 p-2 bg-rose-100 text-rose-700 border border-rose-300 rounded",children:p}),(0,l.jsx)("div",{className:"space-y-4",children:Object.entries(s).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"border rounded p-3",children:[(0,l.jsx)("h3",{className:"font-medium capitalize",children:t}),(0,l.jsxs)("div",{className:"text-sm ".concat("PASS"===s.status?"text-green-600":"text-red-600"),children:["Status: ",s.status]}),s.error&&(0,l.jsxs)("div",{className:"text-red-500 text-sm mt-1",children:["Error: ",s.error]}),"PASS"===s.status&&(0,l.jsx)("div",{className:"text-gray-600 text-sm mt-1",children:Object.entries(s).filter(e=>{let[t]=e;return"status"!==t}).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{children:[t,": ",JSON.stringify(s)]},t)})})]},t)})}),(0,l.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:[(0,l.jsx)("h3",{className:"font-medium mb-2",children:"Current State:"}),(0,l.jsxs)("div",{className:"text-sm space-y-1",children:[(0,l.jsxs)("div",{children:["User: ",e?"".concat(e.firstName," ").concat(e.lastName):"Not logged in"]}),(0,l.jsxs)("div",{children:["Token: ",t?"Present":"Missing"]}),(0,l.jsxs)("div",{children:["API Base: ",a.FH.defaults.baseURL]})]})]})]}),(0,l.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Test Public PDF Viewer"}),(0,l.jsx)("div",{className:"bg-white p-4 rounded shadow",children:(0,l.jsx)(c.A,{file:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",onLoadError:e=>{console.error("Test PDF error:",e)},children:(0,l.jsx)(d.A,{pageNumber:1,width:600})})})]}),(0,l.jsx)(A,{}),(0,l.jsx)(T,{})]})}},1815:()=>{},2787:()=>{},3237:()=>{},6671:()=>{},7492:()=>{},7640:()=>{},8387:(e,t,s)=>{"use strict";function r(e){var t,s,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=r(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function a(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}s.d(t,{$:()=>a,A:()=>n});const n=a}}]);
//# sourceMappingURL=784.3963fca0.chunk.js.map