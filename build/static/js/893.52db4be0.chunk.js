/*! For license information please see 893.52db4be0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkdoc_sign_client=self.webpackChunkdoc_sign_client||[]).push([[893],{956:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(5043),r=a(3216),i=a(5475),n=a(9798),l=a(2894),o=a(9445),d=a(2043),c=a(7784);const m=(0,c.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),u=(0,c.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x=(0,c.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var h=a(1089),g=a(579);const p=()=>{var e,t,a,c;const{user:p,logout:f}=(0,n.As)(),b=(0,r.Zp)(),v=(0,r.zy)(),{toast:j}=(0,o.dj)(),[y,w]=(0,s.useState)(!1),[N,A]=(0,s.useState)(!1),k=async()=>{A(!0);try{await f(),j({title:"Logged out",description:"You have been successfully logged out.",variant:"success"}),b("/login",{replace:!0,state:{from:v}})}catch(e){console.error("Logout error:",e),j({title:"Error",description:"Failed to log out. Please try again.",variant:"error"})}finally{A(!1)}};if(["/login","/register","/forgot-password","/reset-password"].includes(v.pathname))return null;const I=[{to:"/dashboard",label:"Dashboard"},{to:"/upload",label:"Upload"},{to:"/templates",label:"Templates"}];return(0,g.jsxs)("header",{className:"sticky top-0 z-40 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:[(0,g.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsxs)(i.N_,{to:"/",className:"flex items-center space-x-2",children:[(0,g.jsx)("img",{src:"/logo.svg",alt:"Logo",className:"h-8 w-8"}),(0,g.jsx)("span",{className:"text-xl font-bold text-primary-600",children:"DocSign"})]}),(0,g.jsx)("nav",{className:"hidden md:flex md:ml-10 md:space-x-6",children:I.map(e=>(0,g.jsx)(i.N_,{to:e.to,className:(0,h.cn)("text-sm font-medium transition-colors hover:text-primary-600",v.pathname===e.to?"text-primary-600":"text-gray-700"),children:e.label},e.to))})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[p?(0,g.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,g.jsx)(l.$,{variant:"ghost",size:"sm",onClick:k,disabled:N,leftIcon:N?(0,g.jsx)(d.A,{}):(0,g.jsx)(m,{}),children:N?"Logging out...":"Logout"}),(0,g.jsx)("div",{className:"h-8 w-px bg-gray-200"}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-medium",children:(null===(e=p.name)||void 0===e?void 0:e.charAt(0))||(null===(t=p.email)||void 0===t?void 0:t.charAt(0).toUpperCase())}),(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:p.name||p.email})]})]}):(0,g.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[(0,g.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>b("/login"),children:"Login"}),(0,g.jsx)(l.$,{size:"sm",onClick:()=>b("/register"),children:"Get Started"})]}),(0,g.jsx)(l.$,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>w(!y),"aria-label":y?"Close menu":"Open menu",children:(()=>{const e=y?(0,g.jsx)(u,{className:"h-5 w-5"}):(0,g.jsx)(x,{className:"h-5 w-5"});if(!s.isValidElement(e))throw new Error("[Header] Mobile menu icon must be a valid React element.");return e})()})]})]}),y&&(0,g.jsx)("div",{className:"md:hidden",children:(0,g.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[I.map(e=>(0,g.jsx)(i.N_,{to:e.to,className:(0,h.cn)("block rounded-md px-3 py-2 text-base font-medium",v.pathname===e.to?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>w(!1),children:e.label},e.to)),p?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,g.jsxs)("div",{className:"flex items-center px-3 py-2",children:[(0,g.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-medium mr-2",children:(null===(a=p.name)||void 0===a?void 0:a.charAt(0))||(null===(c=p.email)||void 0===c?void 0:c.charAt(0).toUpperCase())}),(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:p.name||p.email})]}),(0,g.jsx)("button",{onClick:k,disabled:N,className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:N?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:"h-4 w-4 border-2 border-gray-400 border-t-primary-500 rounded-full animate-spin"}),"Logging out..."]}):"Logout"})]}):(0,g.jsxs)("div",{className:"pt-4 pb-2 space-y-2",children:[(0,g.jsx)(l.$,{className:"w-full",onClick:()=>{w(!1),b("/login")},children:"Login"}),(0,g.jsx)(l.$,{variant:"outline",className:"w-full",onClick:()=>{w(!1),b("/register")},children:"Get Started"})]})]})})]})}},1089:(e,t,a)=>{a.d(t,{cn:()=>i});var s=a(8387),r=a(5667);function i(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},2894:(e,t,a)=>{a.d(t,{$:()=>u});var s=a(2555),r=a(3986),i=a(5043),n=a(2656),l=a(1089),o=a(2043),d=a(579);const c=["className","variant","size","isLoading","loadingText","leftIcon","rightIcon","children"],m=(0,n.F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((e,t)=>{let{className:a,variant:n,size:u,isLoading:x=!1,loadingText:h,leftIcon:g,rightIcon:p,children:f}=e,b=(0,r.A)(e,c);if(g&&!i.isValidElement(g))throw new Error("[Button] leftIcon must be a valid React element (JSX), not a component or object. You likely wrote leftIcon={MenuIcon} instead of leftIcon={<MenuIcon />}.");if(p&&!i.isValidElement(p))throw new Error("[Button] rightIcon must be a valid React element (JSX), not a component or object. You likely wrote rightIcon={MenuIcon} instead of rightIcon={<MenuIcon />}.");if("function"===typeof f||"object"===typeof f&&!Array.isArray(f)&&!i.isValidElement(f)&&null!==f)throw new Error("[Button] children must be valid React nodes (JSX, string, number, or array of these). You likely passed a component or object.");const v=i.isValidElement(g)?i.cloneElement(g,{className:(0,l.cn)("mr-2 h-4 w-4",g.props.className)}):null,j=i.isValidElement(p)?i.cloneElement(p,{className:(0,l.cn)("ml-2 h-4 w-4",p.props.className)}):null;return(0,d.jsx)("button",(0,s.A)((0,s.A)({className:(0,l.cn)(m({variant:n,size:u,className:a})),ref:t,disabled:x,role:"button","aria-label":b["aria-label"]||void 0},b),{},{children:x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.A,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),h||"Loading..."]}):(0,d.jsxs)(d.Fragment,{children:[v,f&&i.Children.map(f,(e,t)=>i.isValidElement(e)?i.cloneElement(e,{key:t}):e),j]})}))});u.displayName="Button"},7893:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(5043),r=a(3216),i=a(9798),n=a(956),l=a(7200),o=a(9059),d=a(579);const c={signed:"Document Signed",invited:"Signer Invited",viewed:"Document Viewed",downloaded:"Document Downloaded"},m=()=>{const{docId:e}=(0,r.g)(),[t,a]=(0,s.useState)([]),[m,u]=(0,s.useState)(!0),[x,h]=(0,s.useState)(null),[g,p]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{u(!0),h(null);try{const t=await i.FH.get("/api/docs/".concat(e,"/audit"));a(t.data.audit||[])}catch(t){h("Failed to load audit trail.")}u(!1)})()},[e]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.A,{}),(0,d.jsx)("main",{id:"main-content",className:"min-h-screen flex items-center justify-center bg-gray-50",role:"main","aria-label":"Audit Trail main content",children:(0,d.jsxs)("section",{className:"w-full max-w-2xl p-4 sm:p-8 bg-white rounded-2xl shadow-md","aria-labelledby":"audit-title",children:[(0,d.jsx)("h1",{id:"audit-title",className:"text-2xl font-semibold text-indigo-600 mb-4",children:"Audit Trail"}),m?(0,d.jsx)("div",{className:"text-gray-400","aria-live":"polite",children:"Loading..."}):x?(0,d.jsx)("div",{className:"text-rose-500",role:"alert",children:x}):0===t.length?(0,d.jsx)(o.A,{illustration:(0,d.jsxs)("svg",{viewBox:"0 0 64 64",fill:"none",className:"w-full h-full",children:[(0,d.jsx)("circle",{cx:"32",cy:"32",r:"24",fill:"#E5E7EB"}),(0,d.jsx)("rect",{x:"24",y:"28",width:"16",height:"8",rx:"2",fill:"#9CA3AF"})]}),title:"No Audit Logs",description:"Audit logs will appear here once actions are taken."}):(0,d.jsx)("ol",{className:"relative border-l-2 border-indigo-200","aria-label":"Audit event list",children:t.map((e,t)=>{var a;return(0,d.jsxs)("li",{className:"mb-8 ml-6","aria-label":"Audit event ".concat(t+1),children:[(0,d.jsx)("span",{className:"absolute -left-3 flex items-center justify-center w-6 h-6 bg-indigo-600 rounded-full ring-8 ring-white",children:(0,d.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,d.jsx)("circle",{cx:"10",cy:"10",r:"10"})})}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[(0,d.jsx)("span",{className:"font-semibold text-indigo-700",children:c[e.action]||e.action}),(0,d.jsx)("span",{className:"text-xs text-gray-400 ml-2",children:new Date(e.timestamp).toLocaleString()})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(null===(a=e.metadata)||void 0===a?void 0:a.signerEmail)&&(0,d.jsxs)("span",{children:["By: ",(0,d.jsx)("span",{className:"font-mono",children:e.metadata.signerEmail})]}),e.userId&&(0,d.jsxs)("span",{children:["User: ",(0,d.jsx)("span",{className:"font-mono",children:e.userId})]})]}),(0,d.jsx)(l.P.button,{className:"text-xs text-indigo-500 mt-1 hover:underline focus:outline-none focus:ring-2 focus:ring-indigo-400 rounded",onClick:()=>p(g===t?null:t),"aria-expanded":g===t,"aria-controls":"audit-details-".concat(t),"aria-label":g===t?"Hide Details":"Show Details",whileHover:{scale:1.08},whileTap:{scale:.96},children:g===t?"Hide Details":"Show Details"}),g===t&&(0,d.jsxs)("div",{id:"audit-details-".concat(t),className:"mt-2 bg-gray-50 border rounded p-2 text-xs text-gray-700",role:"region","aria-label":"Audit event details",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Action:"})," ",e.action]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Timestamp:"})," ",new Date(e.timestamp).toLocaleString()]}),e.metadata&&Object.keys(e.metadata).map(t=>(0,d.jsxs)("div",{children:[(0,d.jsxs)("b",{children:[t,":"]})," ",String(e.metadata[t])]},t)),e.ipAddress&&(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"IP:"})," ",e.ipAddress]}),e.userAgent&&(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"User Agent:"})," ",e.userAgent]}),e.userId&&(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"User ID:"})," ",e.userId]})]})]},e._id||t)})})]})})]})}},9059:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(5043),r=a(579);const i=e=>{let{illustration:t,title:a,description:i,children:n}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[t?s.isValidElement(t)?(0,r.jsx)("div",{className:"w-40 h-40 mb-6",children:t}):"string"===typeof t?(0,r.jsx)("div",{className:"w-40 h-40 mb-6",dangerouslySetInnerHTML:{__html:t}}):null:null,a&&(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:a}),i&&(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:i}),n]})}},9445:(e,t,a)=>{a.d(t,{dj:()=>x});var s=a(2555),r=a(3986),i=a(5043),n=a(2656),l=a(1089),o=a(579);const d=["className","variant"],c=i.createContext({toast:()=>{},removeToast:()=>{}}),m=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all",{variants:{variant:{default:"border bg-background text-foreground",destructive:"border-destructive bg-destructive text-destructive-foreground",success:"border-green-500 bg-green-50 text-green-900",warning:"border-amber-500 bg-amber-50 text-amber-900",info:"border-blue-500 bg-blue-50 text-blue-900"}},defaultVariants:{variant:"default"}}),u=i.forwardRef((e,t)=>{let{className:a,variant:i}=e,n=(0,r.A)(e,d);return(0,o.jsx)("div",(0,s.A)({ref:t,className:(0,l.cn)(m({variant:i}),a)},n))});u.displayName="Toast";const x=()=>{const e=i.useContext(c);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}}}]);
//# sourceMappingURL=893.52db4be0.chunk.js.map