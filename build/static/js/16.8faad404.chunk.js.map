{"version":3,"file":"static/js/16.8faad404.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/log-out.ts","../node_modules/lucide-react/src/icons/x.ts","../node_modules/lucide-react/src/icons/menu.ts","components/Header.js","pages/DocumentViewerPage.js","utils/coordinateTransform.js","lib/utils.js","components/ui/Button.jsx","components/ui/Toast.jsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm16 17 5-5-5-5', key: '1bji2h' }],\n  ['path', { d: 'M21 12H9', key: 'dn1m92' }],\n  ['path', { d: 'M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4', key: '1uf3rs' }],\n];\n\n/**\n * @component @name LogOut\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMTcgNS01LTUtNSIgLz4KICA8cGF0aCBkPSJNMjEgMTJIOSIgLz4KICA8cGF0aCBkPSJNOSAyMUg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yaDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/log-out\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LogOut = createLucideIcon('log-out', __iconNode);\n\nexport default LogOut;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n];\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('x', __iconNode);\n\nexport default X;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M4 12h16', key: '1lakjw' }],\n  ['path', { d: 'M4 18h16', key: '19g7jn' }],\n  ['path', { d: 'M4 6h16', key: '1o0s65' }],\n];\n\n/**\n * @component @name Menu\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxMmgxNiIgLz4KICA8cGF0aCBkPSJNNCAxOGgxNiIgLz4KICA8cGF0aCBkPSJNNCA2aDE2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/menu\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Menu = createLucideIcon('menu', __iconNode);\n\nexport default Menu;\n","import React, { useState } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { Button } from './ui/Button';\nimport { useToast } from './ui/Toast';\nimport { Menu as MenuIcon, X, Loader as LucideLoader, LogOut as LucideLogOut } from 'lucide-react';\nimport { cn } from '../lib/utils';\n\nconst Header = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { toast } = useToast();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\n\n  const handleLogout = async () => {\n    setIsLoggingOut(true);\n    try {\n      await logout();\n      toast({\n        title: 'Logged out',\n        description: 'You have been successfully logged out.',\n        variant: 'success',\n      });\n      navigate('/login', { replace: true, state: { from: location } });\n    } catch (error) {\n      console.error('Logout error:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to log out. Please try again.',\n        variant: 'error',\n      });\n    } finally {\n      setIsLoggingOut(false);\n    }\n  };\n\n  // Don't show header on auth pages\n  if (['/login', '/register', '/forgot-password', '/reset-password'].includes(location.pathname)) {\n    return null;\n  }\n\n  const navLinks = [\n    { to: '/dashboard', label: 'Dashboard' },\n    { to: '/upload', label: 'Upload' },\n    { to: '/templates', label: 'Templates' },\n  ];\n\n  return (\n    <header className=\"sticky top-0 z-40 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60\">\n      <div className=\"container flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center gap-2\">\n          <Link to=\"/\" className=\"flex items-center space-x-2\">\n            <img src=\"/logo.svg\" alt=\"Logo\" className=\"h-8 w-8\" />\n            <span className=\"text-xl font-bold text-primary-600\">DocSign</span>\n          </Link>\n          \n          <nav className=\"hidden md:flex md:ml-10 md:space-x-6\">\n            {navLinks.map((link) => (\n              <Link\n                key={link.to}\n                to={link.to}\n                className={cn(\n                  'text-sm font-medium transition-colors hover:text-primary-600',\n                  location.pathname === link.to ? 'text-primary-600' : 'text-gray-700'\n                )}\n              >\n                {link.label}\n              </Link>\n            ))}\n          </nav>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          {user ? (\n            <div className=\"hidden md:flex items-center gap-4\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleLogout}\n                disabled={isLoggingOut}\n                leftIcon={isLoggingOut ? <LucideLoader /> : <LucideLogOut />}\n              >\n                {isLoggingOut ? 'Logging out...' : 'Logout'}\n              </Button>\n              <div className=\"h-8 w-px bg-gray-200\" />\n              <div className=\"flex items-center gap-2\">\n                <div className=\"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-medium\">\n                  {user.name?.charAt(0) || user.email?.charAt(0).toUpperCase()}\n                </div>\n                <span className=\"text-sm font-medium text-gray-700 hidden sm:inline\">\n                  {user.name || user.email}\n                </span>\n              </div>\n            </div>\n          ) : (\n            <div className=\"hidden md:flex items-center gap-2\">\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={() => navigate('/login')}\n              >\n                Login\n              </Button>\n              <Button \n                size=\"sm\" \n                onClick={() => navigate('/register')}\n              >\n                Get Started\n              </Button>\n            </div>\n          )}\n\n          {/* Mobile menu button */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"md:hidden\"\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            aria-label={mobileMenuOpen ? 'Close menu' : 'Open menu'}\n          >\n            {(() => {\n              const icon = mobileMenuOpen ? <X className=\"h-5 w-5\" /> : <MenuIcon className=\"h-5 w-5\" />;\n              if (!React.isValidElement(icon)) {\n                throw new Error('[Header] Mobile menu icon must be a valid React element.');\n              }\n              return icon;\n            })()}\n          </Button>\n        </div>\n      </div>\n\n      {/* Mobile menu */}\n      {mobileMenuOpen && (\n        <div className=\"md:hidden\">\n          <div className=\"space-y-1 px-2 pb-3 pt-2\">\n            {navLinks.map((link) => (\n              <Link\n                key={link.to}\n                to={link.to}\n                className={cn(\n                  'block rounded-md px-3 py-2 text-base font-medium',\n                  location.pathname === link.to\n                    ? 'bg-primary-50 text-primary-600'\n                    : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900'\n                )}\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                {link.label}\n              </Link>\n            ))}\n            {user ? (\n              <>\n                <div className=\"border-t border-gray-200 my-2\" />\n                <div className=\"flex items-center px-3 py-2\">\n                  <div className=\"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-medium mr-2\">\n                    {user.name?.charAt(0) || user.email?.charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"text-sm font-medium text-gray-700\">\n                    {user.name || user.email}\n                  </span>\n                </div>\n                <button\n                  onClick={handleLogout}\n                  disabled={isLoggingOut}\n                  className=\"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center gap-2\"\n                >\n                  {isLoggingOut ? (\n                    <>\n                      <span className=\"h-4 w-4 border-2 border-gray-400 border-t-primary-500 rounded-full animate-spin\" />\n                      Logging out...\n                    </>\n                  ) : (\n                    'Logout'\n                  )}\n                </button>\n              </>\n            ) : (\n              <div className=\"pt-4 pb-2 space-y-2\">\n                <Button \n                  className=\"w-full\" \n                  onClick={() => {\n                    setMobileMenuOpen(false);\n                    navigate('/login');\n                  }}\n                >\n                  Login\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  className=\"w-full\" \n                  onClick={() => {\n                    setMobileMenuOpen(false);\n                    navigate('/register');\n                  }}\n                >\n                  Get Started\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </header>\n  );\n};\n\nexport default Header;","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useAuth, api } from '../context/AuthContext';\r\nimport PDFRenderer from '../components/PDFRenderer';\r\nimport Header from '../components/Header';\r\nimport SignatureInputModal from '../components/SignatureInputModal';\r\nimport { cssToPDF } from '../utils/coordinateTransform';\r\n\r\nconst DEFAULT_SIG_WIDTH = 180;\r\nconst DEFAULT_SIG_HEIGHT = 60;\r\n\r\n// TODO: Integrate signature overlay and placement logic\r\n\r\nconst DocumentViewerPage = () => {\r\n  const { id } = useParams();\r\n  const { token, user } = useAuth();\r\n  const [pdfFile, setPdfFile] = useState(null); // Blob or URL\r\n  const [docInfo, setDocInfo] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [signatureFields, setSignatureFields] = useState([]);\r\n  const [showSignatureModal, setShowSignatureModal] = useState(false);\r\n  const [pendingSignature, setPendingSignature] = useState(null); // { dataUrl, type }\r\n  const [selectedFieldId, setSelectedFieldId] = useState(null);\r\n  const [pageDims, setPageDims] = useState({ width: 900, height: 1200 });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [sigActionLoading, setSigActionLoading] = useState(false);\r\n  const [sigActionError, setSigActionError] = useState('');\r\n  const [finalizeLoading, setFinalizeLoading] = useState(false);\r\n  const [finalizeError, setFinalizeError] = useState('');\r\n  const [pdfBlobUrl, setPdfBlobUrl] = useState(null);\r\n\r\n  // Fetch document metadata and signature overlays only.\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    setLoading(true);\r\n    setError('');\r\n    setDocInfo(null);\r\n    setSignatureFields([]);\r\n    const fetchDoc = async () => {\r\n      try {\r\n        // Fetch document metadata\r\n        const docRes = await api.get(`/api/docs/${id}`);\r\n        setDocInfo(docRes.data.document);\r\n        // Map signers/signatureData to overlays\r\n        const signers = docRes.data.document.signers || [];\r\n        const overlays = signers\r\n          .filter(s => s.signatureData && s.signatureData.image)\r\n          .map((s, idx) => ({\r\n            id: s._id || idx,\r\n            page: s.signatureData.page || 1,\r\n            x: s.signatureData.x || 50,\r\n            y: s.signatureData.y || 50,\r\n            width: s.signatureData.width || DEFAULT_SIG_WIDTH,\r\n            height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\r\n            rotation: s.signatureData.rotation || 0,\r\n            signature: { data: s.signatureData.image, type: s.signatureData.type },\r\n            signerEmail: s.email,\r\n          }));\r\n        setSignatureFields(overlays);\r\n      } catch (err) {\r\n        setError(err.response?.data?.message || 'Failed to load document.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchDoc();\r\n  }, [id, token]);\r\n\r\n  useEffect(() => {\r\n    const fetchPdfBlob = async () => {\r\n      if (!docInfo) return;\r\n      try {\r\n        setLoading(true);\r\n        setError('');\r\n        // Always get the latest JWT from localStorage\r\n        const latestToken = localStorage.getItem('token');\r\n        const res = await api.get(`/api/docs/${docInfo._id}/download`, {\r\n          responseType: 'blob',\r\n          headers: { Authorization: `Bearer ${latestToken}` },\r\n        });\r\n        const blobUrl = window.URL.createObjectURL(res.data);\r\n        setPdfBlobUrl(blobUrl);\r\n      } catch (err) {\r\n        setError(err.response?.data?.message || 'Failed to load PDF.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchPdfBlob();\r\n    // Clean up blob URL on unmount\r\n    return () => {\r\n      if (pdfBlobUrl) window.URL.revokeObjectURL(pdfBlobUrl);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [docInfo]);\r\n\r\n  // Handle click-to-place signature field (only if a signature is pending)\r\n  const handlePageClick = async (page, x, y, dims) => {\r\n    if (!pendingSignature || !docInfo) return;\r\n    setSigActionLoading(true);\r\n    setSigActionError('');\r\n    try {\r\n      // Convert to PDF coordinates\r\n      const pdfCoords = cssToPDF(x, y, dims.height, 1); // scale=1 for now\r\n      // Save to backend (self-sign)\r\n      await api.post('/api/signatures/self-sign', {\r\n        documentId: docInfo._id,\r\n        signerEmail: user.email,\r\n        signerName: user.firstName + ' ' + user.lastName,\r\n        signatureData: pendingSignature.data,\r\n        signatureType: pendingSignature.type,\r\n        position: {\r\n          page,\r\n          x: pdfCoords.x,\r\n          y: pdfCoords.y,\r\n          width: DEFAULT_SIG_WIDTH,\r\n          height: DEFAULT_SIG_HEIGHT,\r\n          rotation: 0,\r\n          image: pendingSignature.data,\r\n          type: pendingSignature.type,\r\n        },\r\n      });\r\n      // Reload document and overlays\r\n      const docRes = await api.get(`/api/docs/${id}`);\r\n      setDocInfo(docRes.data.document);\r\n      const signers = docRes.data.document.signers || [];\r\n      const overlays = signers\r\n        .filter(s => s.signatureData && s.signatureData.image)\r\n        .map((s, idx) => ({\r\n          id: s._id || idx,\r\n          page: s.signatureData.page || 1,\r\n          x: s.signatureData.x || 50,\r\n          y: s.signatureData.y || 50,\r\n          width: s.signatureData.width || DEFAULT_SIG_WIDTH,\r\n          height: s.signatureData.height || DEFAULT_SIG_HEIGHT,\r\n          rotation: s.signatureData.rotation || 0,\r\n          signature: { data: s.signatureData.image, type: s.signatureData.type },\r\n          signerEmail: s.email,\r\n        }));\r\n      setSignatureFields(overlays);\r\n      setPendingSignature(null);\r\n      setShowSignatureModal(false);\r\n    } catch (err) {\r\n      setSigActionError(err.response?.data?.message || 'Failed to save signature.');\r\n    } finally {\r\n      setSigActionLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update a signature field's position/size/rotation (optional: sync with backend)\r\n  const handleUpdateField = (id, updates) => {\r\n    setSignatureFields(fields => fields.map(f => f.id === id ? { ...f, ...updates } : f));\r\n    // Optionally, sync with backend here\r\n  };\r\n\r\n  // Remove a signature field (optional: sync with backend)\r\n  const handleRemoveField = (id) => {\r\n    setSignatureFields(fields => fields.filter(f => f.id !== id));\r\n    setSelectedFieldId(null);\r\n    // Optionally, sync with backend here\r\n  };\r\n\r\n  // Save signature modal result\r\n  const handleSignatureSave = (dataUrl, type) => {\r\n    setPendingSignature({ data: dataUrl, type });\r\n    setShowSignatureModal(false); // Close the modal after saving\r\n    // Modal closes, user will click to place on PDF\r\n  };\r\n\r\n  // Track selected field for coordinate display\r\n  const handleFieldSelect = (id) => {\r\n    setSelectedFieldId(id);\r\n  };\r\n\r\n  // Get selected field's coordinates (PDF system)\r\n  const selectedField = signatureFields.find(f => f.id === selectedFieldId);\r\n\r\n  // Finalize and download signed PDF\r\n  const handleFinalizeDownload = async () => {\r\n    if (!docInfo) return;\r\n    setFinalizeLoading(true);\r\n    setFinalizeError('');\r\n    try {\r\n      const res = await api.post(`/api/signatures/finalize/${docInfo._id}`, {}, {\r\n        responseType: 'blob',\r\n      });\r\n      // Download the PDF\r\n      const url = window.URL.createObjectURL(new Blob([res.data], { type: 'application/pdf' }));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `${docInfo.originalName || 'signed-document'}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.parentNode.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (err) {\r\n      setFinalizeError(err.response?.data?.message || 'Failed to finalize and download PDF.');\r\n    } finally {\r\n      setFinalizeLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen min-h-0 w-full\">\r\n      <Header />\r\n      {/* Navigation Toolbar restored */}\r\n      <div className=\"h-12 flex items-center justify-center bg-gray-50 border-b border-gray-200 z-10\">\r\n        <button\r\n          className=\"px-3 py-2 bg-gray-200 rounded disabled:opacity-50 font-semibold min-w-[44px] min-h-[36px] focus:outline-none focus:ring-2 focus:ring-indigo-400 mx-1\"\r\n          onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\r\n          disabled={currentPage <= 1}\r\n          aria-label=\"Previous page\"\r\n          title=\"Previous page\"\r\n          tabIndex={0}\r\n        >\r\n          Previous\r\n        </button>\r\n        <span className=\"text-gray-700 font-medium mx-2\" aria-live=\"polite\">\r\n          Page {currentPage}\r\n        </span>\r\n        <button\r\n          className=\"px-3 py-2 bg-gray-200 rounded disabled:opacity-50 font-semibold min-w-[44px] min-h-[36px] focus:outline-none focus:ring-2 focus:ring-indigo-400 mx-1\"\r\n          onClick={() => setCurrentPage((p) => p + 1)}\r\n          disabled={false} // We'll disable if we know numPages\r\n          aria-label=\"Next page\"\r\n          title=\"Next page\"\r\n          tabIndex={0}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n      {/* PDF Viewer Container - bulletproof flex layout */}\r\n      <div className=\"flex-1 min-h-0 overflow-auto flex justify-center items-start bg-gray-50\">\r\n        <div className=\"w-full max-w-5xl flex flex-col items-center relative m-auto\">\r\n          <h1 className=\"text-2xl font-bold mb-4\">Document Viewer</h1>\r\n          {loading && <div className=\"text-gray-500\">Loading document...</div>}\r\n          {error && <div className=\"text-red-500\">{error}</div>}\r\n          {sigActionError && <div className=\"text-red-500\">{sigActionError}</div>}\r\n          {finalizeError && <div className=\"text-red-500\">{finalizeError}</div>}\r\n          {pdfBlobUrl && !loading && !error && (\r\n            <PDFRenderer\r\n              file={pdfBlobUrl}\r\n              pageNumber={currentPage}\r\n              signatureFields={signatureFields}\r\n              onPageClick={pendingSignature ? handlePageClick : undefined}\r\n              onUpdateField={handleUpdateField}\r\n              onRemoveField={handleRemoveField}\r\n              onFieldSelect={handleFieldSelect}\r\n              selectedFieldId={selectedFieldId}\r\n              onPageChange={setCurrentPage}\r\n              initialPage={currentPage}\r\n              pageDims={pageDims}\r\n            />\r\n          )}\r\n          {!pdfBlobUrl && !loading && !error && (\r\n            <div className=\"text-gray-500\">No PDF loaded</div>\r\n          )}\r\n          {/* Finalize & Download Button */}\r\n          {docInfo && docInfo.status !== 'completed' && (\r\n            <button\r\n              className=\"mt-6 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 disabled:opacity-50\"\r\n              onClick={handleFinalizeDownload}\r\n              disabled={finalizeLoading}\r\n              aria-label=\"Finalize and download signed PDF\"\r\n            >\r\n              {finalizeLoading ? 'Finalizing...' : 'Finalize & Download Signed PDF'}\r\n            </button>\r\n          )}\r\n          {/* Floating Add Signature Button */}\r\n          <button\r\n            className=\"fixed bottom-8 right-8 z-40 bg-indigo-600 text-white rounded-full shadow-lg p-4 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400\"\r\n            onClick={() => setShowSignatureModal(true)}\r\n            aria-label=\"Add Signature\"\r\n            disabled={sigActionLoading}\r\n          >\r\n            <span className=\"text-2xl font-bold\">+</span>\r\n          </button>\r\n          {/* Signature Creation Modal */}\r\n          <SignatureInputModal\r\n            open={showSignatureModal}\r\n            onClose={() => { setShowSignatureModal(false); setPendingSignature(null); }}\r\n            onSave={handleSignatureSave}\r\n          />\r\n          {/* Real-time coordinate display for selected field */}\r\n          {selectedField && (\r\n            <div className=\"fixed bottom-8 left-8 bg-white rounded shadow-lg px-4 py-2 text-gray-700 z-40\">\r\n              <div className=\"font-semibold\">Signature Coordinates</div>\r\n              <div>Page: {selectedField.page}</div>\r\n              <div>X: {Math.round(selectedField.x)}</div>\r\n              <div>Y: {Math.round(selectedField.y)}</div>\r\n              <div>Width: {Math.round(selectedField.width)}</div>\r\n              <div>Height: {Math.round(selectedField.height)}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentViewerPage; ","/**\r\n * Coordinate transformation utilities for PDF signature placement.\r\n * Supports mapping between CSS (screen) and PDF (points) coordinates.\r\n * PDF origin: bottom-left (0,0). CSS origin: top-left (0,0).\r\n */\r\n\r\n/**\r\n * Convert CSS (screen) coordinates to PDF coordinates.\r\n * @param {number} cssX - X in CSS pixels (from left)\r\n * @param {number} cssY - Y in CSS pixels (from top)\r\n * @param {number} pageHeight - PDF page height in points\r\n * @param {number} [scale=1] - Scale factor (screen:PDF)\r\n * @returns {{x: number, y: number}} PDF coordinates (origin bottom-left)\r\n */\r\nexport function cssToPDF(cssX, cssY, pageHeight, scale = 1) {\r\n  return {\r\n    x: cssX / scale,\r\n    y: (pageHeight - cssY / scale),\r\n  };\r\n}\r\n\r\n/**\r\n * Convert PDF coordinates to CSS (screen) coordinates.\r\n * @param {number} pdfX - X in PDF points (from left)\r\n * @param {number} pdfY - Y in PDF points (from bottom)\r\n * @param {number} pageHeight - PDF page height in points\r\n * @param {number} [scale=1] - Scale factor (screen:PDF)\r\n * @returns {{x: number, y: number}} CSS coordinates (origin top-left)\r\n */\r\nexport function pdfToCSS(pdfX, pdfY, pageHeight, scale = 1) {\r\n  return {\r\n    x: pdfX * scale,\r\n    y: (pageHeight - pdfY) * scale,\r\n  };\r\n}\r\n\r\n/**\r\n * Calculate the bounding box of a signature field.\r\n * @param {object} signature - Signature field object with x, y, width, height\r\n * @returns {{left: number, top: number, right: number, bottom: number}}\r\n */\r\nexport function calculateBounds(signature) {\r\n  return {\r\n    left: signature.x,\r\n    top: signature.y,\r\n    right: signature.x + signature.width,\r\n    bottom: signature.y + signature.height,\r\n  };\r\n}\r\n\r\n/**\r\n * Check if a point is within bounds.\r\n * @param {number} x\r\n * @param {number} y\r\n * @param {object} bounds - {left, top, right, bottom}\r\n * @returns {boolean}\r\n */\r\nexport function isWithinBounds(x, y, bounds) {\r\n  return x >= bounds.left && x <= bounds.right && y >= bounds.top && y <= bounds.bottom;\r\n} ","import { clsx } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\n\r\n/**\r\n * Combines multiple class names and merges Tailwind CSS classes\r\n * @param {...any} inputs - Class names to be combined\r\n * @returns {string} - Combined and optimized class names\r\n */\r\nexport function cn(...inputs) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\n/**\r\n * Formats a date to a readable string\r\n * @param {Date|string} date - Date to format\r\n * @param {Object} options - Intl.DateTimeFormat options\r\n * @returns {string} - Formatted date string\r\n */\r\nexport function formatDate(date, options = {}) {\r\n  const defaultOptions = {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n    ...options,\r\n  };\r\n  \r\n  return new Date(date).toLocaleDateString(undefined, defaultOptions);\r\n}\r\n\r\n/**\r\n * Formats file size to human readable format\r\n * @param {number} bytes - File size in bytes\r\n * @returns {string} - Formatted file size (e.g., \"1.2 MB\")\r\n */\r\nexport function formatFileSize(bytes) {\r\n  if (bytes === 0) return '0 Bytes';\r\n  \r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\r\n}\r\n\r\n/**\r\n * Truncates text to a specified length\r\n * @param {string} text - Text to truncate\r\n * @param {number} length - Maximum length\r\n * @returns {string} - Truncated text with ellipsis if needed\r\n */\r\nexport function truncate(text, length = 50) {\r\n  if (text.length <= length) return text;\r\n  return `${text.substring(0, length)}...`;\r\n}\r\n\r\n/**\r\n * Generates a unique ID\r\n * @returns {string} - Unique ID\r\n */\r\nexport function generateId() {\r\n  return Math.random().toString(36).substring(2, 15) + \r\n         Math.random().toString(36).substring(2, 15);\r\n}\r\n\r\n/**\r\n * Copies text to clipboard\r\n * @param {string} text - Text to copy\r\n * @returns {Promise<boolean>} - Whether the copy was successful\r\n */\r\nexport async function copyToClipboard(text) {\r\n  try {\r\n    await navigator.clipboard.writeText(text);\r\n    return true;\r\n  } catch (err) {\r\n    console.error('Failed to copy text: ', err);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Validates an email address\r\n * @param {string} email - Email to validate\r\n * @returns {boolean} - Whether the email is valid\r\n */\r\nexport function validateEmail(email) {\r\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return re.test(String(email).toLowerCase());\r\n}\r\n\r\n/**\r\n * Downloads a file from a URL\r\n * @param {string} url - File URL\r\n * @param {string} filename - Desired filename\r\n */\r\nexport function downloadFile(url, filename) {\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = filename;\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n}\r\n\r\n/**\r\n * Converts a file to base64\r\n * @param {File} file - File to convert\r\n * @returns {Promise<string>} - Base64 string\r\n */\r\nexport function fileToBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n","import * as React from 'react';\nimport { cva } from 'class-variance-authority';\nimport { cn } from '../../lib/utils';\nimport { Loader, LogIn, LogOut } from 'lucide-react';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline:\n          'border border-input hover:bg-accent hover:text-accent-foreground',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'underline-offset-4 hover:underline text-primary',\n      },\n      size: {\n        default: 'h-10 py-2 px-4',\n        sm: 'h-9 px-3 rounded-md',\n        lg: 'h-11 px-8 rounded-md',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\nconst Button = React.forwardRef(\n  ({\n      className,\n      variant,\n      size,\n      isLoading = false,\n      loadingText,\n      leftIcon: LeftIconProp,\n      rightIcon: RightIconProp,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    // DEV: Warn if leftIcon/rightIcon is not a valid React element\n    if (LeftIconProp && !React.isValidElement(LeftIconProp)) {\n      throw new Error(\n        '[Button] leftIcon must be a valid React element (JSX), not a component or object. You likely wrote leftIcon={MenuIcon} instead of leftIcon={<MenuIcon />}.'\n      );\n    }\n    if (RightIconProp && !React.isValidElement(RightIconProp)) {\n      throw new Error(\n        '[Button] rightIcon must be a valid React element (JSX), not a component or object. You likely wrote rightIcon={MenuIcon} instead of rightIcon={<MenuIcon />}.'\n      );\n    }\n    // DEV: Warn if children is a function or object (not JSX)\n    if (\n      typeof children === 'function' ||\n      (typeof children === 'object' && !Array.isArray(children) && !React.isValidElement(children) && children !== null)\n    ) {\n      throw new Error(\n        '[Button] children must be valid React nodes (JSX, string, number, or array of these). You likely passed a component or object.'\n      );\n    }\n\n    // Only allow valid React elements for icons\n    const LeftIcon = React.isValidElement(LeftIconProp)\n      ? React.cloneElement(LeftIconProp, {\n          className: cn('mr-2 h-4 w-4', LeftIconProp.props.className)\n        })\n      : null;\n\n    const RightIcon = React.isValidElement(RightIconProp)\n      ? React.cloneElement(RightIconProp, {\n          className: cn('ml-2 h-4 w-4', RightIconProp.props.className)\n        })\n      : null;\n    \n    // Ensure children is a valid React node\n    const renderChildren = () => {\n      if (isLoading) {\n        return (\n          <>\n            <Loader className=\"animate-spin -ml-1 mr-2 h-4 w-4\" />\n            {loadingText || 'Loading...'}\n          </>\n        );\n      }\n      \n      // Safely render children and icons\n      return (\n        <>\n          {LeftIcon}\n          {children && React.Children.map(children, (child, i) => \n            React.isValidElement(child) ? React.cloneElement(child, { key: i }) : child\n          )}\n          {RightIcon}\n        </>\n      );\n    };\n    \n    return (\n      <button\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        disabled={isLoading}\n        role=\"button\"\n        aria-label={props[\"aria-label\"] || undefined}\n        {...props}\n      >\n        {renderChildren()}\n      </button>\n    );\n  }\n);\n\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n\n// Note: The asChild prop is currently disabled to resolve React child errors.\n// We'll reimplement it once we've confirmed the error is fixed.\n","import * as React from 'react';\r\nimport { cva } from 'class-variance-authority';\r\nimport { X } from 'lucide-react';\r\nimport { cn } from '../../lib/utils';\r\n\r\n// Create the context with a default value\r\nexport const ToastContext = React.createContext({\r\n  toast: () => {},\r\n  removeToast: () => {}\r\n});\r\n\r\nconst toastVariants = cva(\r\n  'group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'border bg-background text-foreground',\r\n        destructive: 'border-destructive bg-destructive text-destructive-foreground',\r\n        success: 'border-green-500 bg-green-50 text-green-900',\r\n        warning: 'border-amber-500 bg-amber-50 text-amber-900',\r\n        info: 'border-blue-500 bg-blue-50 text-blue-900',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n    },\r\n  }\r\n);\r\n\r\nconst Toast = React.forwardRef(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nToast.displayName = 'Toast';\r\n\r\n// Export the context provider\r\nexport const ToastProvider = ({ children }) => {\r\n  const [toasts, setToasts] = React.useState([]);\r\n\r\n  const toast = React.useCallback(({ title, description, variant = 'default', duration = 5000 }) => {\r\n    const id = Math.random().toString(36).substring(2, 9);\r\n    const newToast = { id, title, description, variant };\r\n    \r\n    setToasts(prev => [...prev, newToast]);\r\n\r\n    if (duration) {\r\n      setTimeout(() => {\r\n        setToasts(prev => prev.filter(t => t.id !== id));\r\n      }, duration);\r\n    }\r\n\r\n    return id;\r\n  }, []);\r\n\r\n  const removeToast = React.useCallback((id) => {\r\n    setToasts(prev => prev.filter(t => t.id !== id));\r\n  }, []);\r\n\r\n  return (\r\n    <ToastContext.Provider value={{ toast, removeToast }}>\r\n      {children}\r\n      <div className=\"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\">\r\n        {toasts.map(({ id, title, description, variant }) => (\r\n          <Toast key={id} variant={variant} className=\"mb-2\">\r\n            <div className=\"grid gap-1\">\r\n              {title && <div className=\"font-semibold\">{title}</div>}\r\n              {description && <div className=\"text-sm opacity-90\">{description}</div>}\r\n            </div>\r\n            <button\r\n              onClick={() => removeToast(id)}\r\n              className=\"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100\"\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </button>\r\n          </Toast>\r\n        ))}\r\n      </div>\r\n    </ToastContext.Provider>\r\n  );\r\n};\r\n\r\n// Create a custom hook for using the toast context\r\nexport const useToast = () => {\r\n  const context = React.useContext(ToastContext);\r\n  if (!context) {\r\n    throw new Error('useToast must be used within a ToastProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport { Toast };\r\n"],"names":["LogOut","createLucideIcon","d","key","X","Menu","Header","_user$name","_user$email","_user$name2","_user$email2","user","logout","useAuth","navigate","useNavigate","location","useLocation","toast","useToast","mobileMenuOpen","setMobileMenuOpen","useState","isLoggingOut","setIsLoggingOut","handleLogout","async","title","description","variant","replace","state","from","error","console","includes","pathname","navLinks","to","label","_jsxs","className","children","Link","_jsx","src","alt","map","link","cn","Button","size","onClick","disabled","leftIcon","LucideLoader","LucideLogOut","name","charAt","email","toUpperCase","icon","MenuIcon","React","Error","_Fragment","DocumentViewerPage","id","useParams","token","pdfFile","setPdfFile","docInfo","setDocInfo","loading","setLoading","setError","signatureFields","setSignatureFields","showSignatureModal","setShowSignatureModal","pendingSignature","setPendingSignature","selectedFieldId","setSelectedFieldId","pageDims","setPageDims","width","height","currentPage","setCurrentPage","sigActionLoading","setSigActionLoading","sigActionError","setSigActionError","finalizeLoading","setFinalizeLoading","finalizeError","setFinalizeError","pdfBlobUrl","setPdfBlobUrl","useEffect","docRes","api","get","concat","data","document","overlays","signers","filter","s","signatureData","image","idx","_id","page","x","y","rotation","signature","type","signerEmail","err","_err$response","_err$response$data","response","message","fetchDoc","latestToken","localStorage","getItem","res","responseType","headers","Authorization","blobUrl","window","URL","createObjectURL","_err$response2","_err$response2$data","fetchPdfBlob","revokeObjectURL","selectedField","find","f","p","Math","max","tabIndex","PDFRenderer","file","pageNumber","onPageClick","dims","pdfCoords","cssX","cssY","pageHeight","scale","arguments","length","undefined","cssToPDF","post","documentId","signerName","firstName","lastName","signatureType","position","_err$response3","_err$response3$data","onUpdateField","handleUpdateField","updates","fields","_objectSpread","onRemoveField","onFieldSelect","onPageChange","initialPage","status","url","Blob","createElement","href","setAttribute","originalName","body","appendChild","click","parentNode","removeChild","_err$response4","_err$response4$data","SignatureInputModal","open","onClose","onSave","handleSignatureSave","dataUrl","round","_len","inputs","Array","_key","twMerge","clsx","buttonVariants","cva","variants","default","destructive","outline","secondary","ghost","sm","lg","defaultVariants","_ref","ref","isLoading","loadingText","LeftIconProp","rightIcon","RightIconProp","props","_objectWithoutProperties","_excluded","isArray","LeftIcon","RightIcon","role","Loader","child","i","displayName","ToastContext","removeToast","toastVariants","success","warning","info","Toast","context"],"sourceRoot":""}