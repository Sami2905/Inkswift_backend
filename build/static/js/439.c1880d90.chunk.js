"use strict";(self.webpackChunkdoc_sign_client=self.webpackChunkdoc_sign_client||[]).push([[439],{439:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var t=a(5043),l=a(9798),r=a(2339),i=a(579);const d=()=>{const[e,s]=(0,t.useState)(""),[a,d]=(0,t.useState)(null),[n,o]=(0,t.useState)(!1),[c,x]=(0,t.useState)(null),[m,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(0),[g,f]=(0,t.useState)(1),[v,j]=(0,t.useState)(1),[b,N]=(0,t.useState)(null),[y,w]=(0,t.useState)(null),{token:F}=(0,l.As)(),D=(0,t.useRef)(null),P=(0,t.useRef)(null),L=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},k=async e=>{p(0),o(!0),x(null),N(null),w(null);const s=new FormData;s.append("file",e);try{const e=await l.FH.post("/api/docs/upload",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(F)},onUploadProgress:e=>{const s=Math.round(100*e.loaded/e.total);p(s)}});o(!1),p(100),N(e.data.document),r.Ay.success("PDF uploaded successfully!"),U(e.data.document._id)}catch(i){var a,t;o(!1),p(0),x({title:"Upload Failed",message:(null===(a=i.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to upload PDF."}),r.Ay.error("Failed to upload PDF.")}},U=async e=>{o(!0),w(null);try{const s=await l.FH.get("/api/docs/".concat(e,"/download"),{responseType:"blob",headers:{Authorization:"Bearer ".concat(F)}}),a=URL.createObjectURL(s.data);w(a),o(!1)}catch(s){o(!1),s.response?(console.error("PDF fetch error:",s.response.status,s.response.statusText,s.response.data),x({title:"Load Failed (".concat(s.response.status,")"),message:s.response.statusText||"Failed to load PDF from server."})):(console.error("PDF fetch error:",s),x({title:"Load Failed",message:"Failed to load PDF from server."}))}},R=e=>{e.preventDefault(),e.stopPropagation()};return(0,i.jsx)("div",{className:"bg-gray-50 min-h-screen",children:(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-indigo-700 mb-2",children:"PDF Viewer"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Upload or enter URL to view PDF documents"})]}),(0,i.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-8",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("label",{htmlFor:"pdf-url",className:"block text-sm font-medium text-gray-700 mb-1",children:"PDF URL"}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("input",{type:"text",id:"pdf-url",placeholder:"Enter PDF URL",value:e,onChange:e=>s(e.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-l-md focus:ring-indigo-500 focus:border-indigo-500"}),(0,i.jsxs)("button",{onClick:()=>{if(!e.trim())return void x({title:"Missing URL",message:"Please enter a PDF URL to load."});if(!(e=>{try{return new URL(e),!0}catch(s){return/^(https?:\/\/)?([\w.-]+)(:\d+)?(\/.*)?$/i.test(e)}})(e))return void x({title:"Invalid URL",message:"Please enter a valid URL starting with http:// or https://"});o(!0),x(null);let s=e;(s.includes("192.168.56.1")||s.includes("localhost")||s.includes("127.0.0.1"))&&(s.startsWith("https://192.168.56.1:3000/")||(s=s.replace("192.168.56.1","192.168.56.1:3000"))),P.current&&(P.current.src="".concat(s,"#zoom=").concat(100*v))},className:"px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,i.jsx)("i",{className:"fas fa-search mr-1"})," Load"]})]})]}),(0,i.jsx)("div",{className:"flex items-end",children:(0,i.jsxs)("button",{onClick:()=>u(!m),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[(0,i.jsx)("i",{className:"fas fa-upload mr-1"})," Upload PDF"]})})]}),m&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{id:"dropzone",className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer ".concat(a?"border-indigo-500 bg-indigo-50":"border-gray-300"),onDrop:e=>{e.preventDefault(),e.stopPropagation();const s=e.dataTransfer.files[0];s&&"application/pdf"===s.type?(d(s),k(s)):x({title:"Invalid File",message:"Please upload a valid PDF file."})},onDragOver:R,onDragEnter:R,onDragLeave:R,onClick:()=>D.current.click(),children:[(0,i.jsx)("input",{type:"file",ref:D,id:"pdf-file",accept:".pdf",className:"hidden",onChange:e=>{const s=e.target.files[0];s&&("application/pdf"===s.type?(d(s),k(s)):x({title:"Invalid File",message:"Please upload a valid PDF file."}))}}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,i.jsx)("i",{className:"fas fa-file-pdf text-4xl text-indigo-500 mb-3"}),(0,i.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag & drop your PDF file here"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"or"}),(0,i.jsxs)("div",{className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 cursor-pointer",children:[(0,i.jsx)("i",{className:"fas fa-folder-open mr-1"})," Browse Files"]})]})]}),h>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-indigo-700",children:"Uploading..."}),(0,i.jsxs)("span",{className:"text-sm font-medium text-indigo-700",children:[Math.round(h),"%"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,i.jsx)("div",{className:"bg-indigo-600 h-2.5 rounded-full transition-all duration-300",style:{width:"".concat(h,"%")}})})]})]})]})}),c&&(0,i.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("i",{className:"fas fa-exclamation-circle text-red-500 text-xl"})}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-red-800",children:c.title}),(0,i.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,i.jsx)("p",{children:c.message})})]})]})}),n&&(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 bg-gray-50 rounded-xl mb-6",children:[(0,i.jsx)("div",{className:"animate-spin text-indigo-600 text-5xl mb-4",children:(0,i.jsx)("i",{className:"fas fa-spinner"})}),(0,i.jsx)("p",{className:"text-gray-600",children:h<100?"Uploading PDF document...":"Processing PDF..."})]}),a||e||b?(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 px-4 py-3 border-b",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-800 truncate",children:(null===b||void 0===b?void 0:b.originalName)||(null===a||void 0===a?void 0:a.name)||e.split("/").pop()||"document.pdf"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:()=>j(e=>Math.min(e+.25,3)),className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-gray-100 rounded",children:(0,i.jsx)("i",{className:"fas fa-search-plus"})}),(0,i.jsx)("button",{onClick:()=>j(e=>Math.max(e-.25,.5)),className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-gray-100 rounded",children:(0,i.jsx)("i",{className:"fas fa-search-minus"})}),(0,i.jsx)("button",{onClick:()=>{b?window.open("/api/docs/".concat(b._id,"/download"),"_blank"):a?alert("Download would start for: ".concat(a.name)):e&&alert("Download would start from URL: ".concat(e))},className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-gray-100 rounded",children:(0,i.jsx)("i",{className:"fas fa-download"})})]})]}),(0,i.jsx)("div",{className:"relative overflow-hidden pt-[56.25%]",children:(0,i.jsx)("iframe",{ref:P,className:"absolute top-0 left-0 w-full h-full border-none",title:"PDF Viewer",src:y||void 0,onLoad:()=>o(!1),onError:()=>{o(!1),x({title:"Load Failed",message:"Failed to load PDF. Please check the URL or file and try again."})}})}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-3 border-t flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>f(e=>Math.max(e-1,1)),disabled:g<=1,className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-gray-100 rounded disabled:opacity-50",children:(0,i.jsx)("i",{className:"fas fa-chevron-left"})}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",g," of 5 "]}),(0,i.jsx)("button",{onClick:()=>f(e=>Math.min(e+1,5)),disabled:g>=5,className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-gray-100 rounded disabled:opacity-50",children:(0,i.jsx)("i",{className:"fas fa-chevron-right"})})]}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:b?L(b.fileSize):a?L(a.size):"Loading..."})]})]}):null]})})},n=()=>(0,i.jsx)(d,{})}}]);
//# sourceMappingURL=439.c1880d90.chunk.js.map